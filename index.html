<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Sistema de Avalia√ß√£o de Desempenho - Avalia√ß√£o de Desempenho</title>
    <style>
        :root {
            --cor-primaria: #1e441e;     /* Emerald */
            --cor-secundaria: #8FD694;   /* Celadon */
            --cor-acento: #77AD78;       /* Asparagus */
            --cor-neutra: #6F8F72;       /* Reseda green */
            --cor-escura: #504B43;       /* Walnut brown */
            --cor-clara: #F8FAF9;
            --cor-branca: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: var(--cor-clara); 
            line-height: 1.6;
            color: var(--cor-escura);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-8px); }
            60% { transform: translateY(-4px); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
            animation: slideInUp 0.6s ease-out;
        }

        /* Header */
        .main-header {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-radius: 15px;
            animation: slideInDown 0.7s ease-out;
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }

        .main-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            animation: bounce 1s ease-out 0.5s both;
        }

        .main-header p {
            animation: slideInUp 0.5s ease-out 0.8s both;
        }

        /* Navega√ß√£o */
        .nav-menu {
            background: var(--cor-branca);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
            animation: slideInUp 0.6s ease-out 0.2s both;
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(125, 186, 132, 0.3);
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--cor-secundaria) 0%, var(--cor-secundaria) 100%);
            box-shadow: 0 4px 10px rgba(143, 214, 148, 0.4);
            animation: pulse 2s infinite;
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Se√ß√µes */
        .section {
            background: var(--cor-branca);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .section.active {
            display: block;
            animation: slideInUp 0.5s ease-out forwards;
        }

        .section h2 {
            color: var(--cor-secundaria);
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid var(--cor-primaria);
            padding-bottom: 10px;
            animation: slideInLeft 0.6s ease-out;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
            animation: slideInLeft 0.5s ease-out;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--cor-escura);
            transition: all 0.3s ease;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--cor-primaria);
            outline: none;
            box-shadow: 0 0 10px rgba(125, 186, 132, 0.2);
            transform: translateY(-2px);
        }

        /* Bot√µes */
        .btn {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin: 5px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(125, 186, 132, 0.3);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:active {
            transform: translateY(0px);
            animation: bounce 0.3s ease-out;
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
        }

        .btn-sm {
            padding: 8px 15px;
            font-size: 12px;
        }

        /* Compet√™ncias */
        .competencia-card {
            background: #f8faf9;
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            transition: all 0.3s ease;
            animation: slideInUp 0.6s ease-out;
        }

        .competencia-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        .competencia-header {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-acento) 100%);
            color: white;
            padding: 20px;
            font-size: 1.2em;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .competencia-header::after {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 3s infinite;
        }

        .fator-item {
            padding: 20px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
            animation: slideInLeft 0.5s ease-out;
        }

        .fator-item:hover {
            background: #f0f8f1;
            transform: translateX(5px);
        }

        .fator-texto {
            margin-bottom: 15px;
            font-weight: 500;
            color: var(--cor-escura);
            transition: all 0.3s ease;
        }

        .rating-container {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .rating-label {
            font-size: 12px;
            color: var(--cor-neutra);
            font-weight: 600;
        }

        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .rating-option:hover {
            background: rgba(125, 186, 132, 0.1);
            transform: scale(1.05);
        }

        .rating-option input[type="radio"] {
            margin-bottom: 5px;
            transform: scale(1.2);
            accent-color: var(--cor-primaria);
            transition: all 0.3s ease;
        }

        .rating-option input[type="radio"]:checked {
            animation: pulse 0.3s ease-out;
        }

        .rating-option span {
            font-size: 12px;
            color: var(--cor-neutra);
            font-weight: bold;
        }

        /* Progresso */
        .progress-container {
            background: var(--cor-branca);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 20px 0;
            animation: slideInUp 0.6s ease-out;
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--cor-secundaria) 0%, var(--cor-primaria) 100%);
            width: 0%;
            transition: width 0.8s ease;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: var(--cor-escura);
            transition: all 0.3s ease;
        }

        /* Resultado */
        .resultado-card {
            background: linear-gradient(135deg, #f8faf9 0%, #e9f5ea 100%);
            border: 2px solid var(--cor-secundaria);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
            display: none;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease;
        }

        .resultado-card.show {
            display: block;
            animation: bounceIn 0.8s ease-out forwards;
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

        .pontuacao-display {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            color: var(--cor-primaria);
            animation: pulse 2s infinite;
        }

        .classificacao-display {
            font-size: 1.5em;
            font-weight: bold;
            padding: 15px 30px;
            border-radius: 50px;
            margin: 20px 0;
            display: inline-block;
            background: var(--cor-primaria);
            color: white;
            animation: bounce 1s ease-out;
        }

        /* Tabelas */
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            animation: slideInUp 0.6s ease-out;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--cor-branca);
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }

        .data-table th {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table tbody tr {
            transition: all 0.3s ease;
            animation: slideInLeft 0.4s ease-out;
        }

        .data-table tbody tr:hover {
            background: #f8faf9;
            transform: scale(1.01);
        }

        /* Cards */
        .info-card {
            background: var(--cor-branca);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 20px 0;
            animation: slideInUp 0.6s ease-out;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria) 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            animation: slideInUp 0.6s ease-out;
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(30, 68, 30, 0.3);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        /* Filtros */
        .filters-card {
            background: #f8faf9;
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            animation: slideInUp 0.6s ease-out;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Alertas */
        .alert {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid;
            animation: slideInLeft 0.5s ease-out;
            transition: all 0.3s ease;
        }

        .alert:hover {
            transform: translateX(5px);
        }

        .alert-success {
            background: rgba(143, 214, 148, 0.1);
            border-color: var(--cor-secundaria);
            color: var(--cor-acento);
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alert-info {
            background: rgba(111, 143, 114, 0.1);
            border-color: var(--cor-neutra);
            color: var(--cor-escura);
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            animation: fadeIn 0.5s ease-out;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--cor-primaria);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--cor-branca);
            padding: 30px;
            border-radius: 15px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            animation: slideInUp 0.4s ease-out;
        }

        /* Login de Acesso */
        .login-card {
            background: var(--cor-branca);
            border: 2px solid var(--cor-primaria);
            border-radius: 15px;
            padding: 40px;
            margin: 20px auto;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            animation: bounceIn 0.8s ease-out;
        }

        .login-title {
            color: var(--cor-primaria);
            margin-bottom: 30px;
            font-size: 1.8em;
            animation: slideInDown 0.6s ease-out;
        }

        .login-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .login-input:focus {
            border-color: var(--cor-primaria);
            outline: none;
            box-shadow: 0 0 15px rgba(125, 186, 132, 0.3);
            transform: scale(1.02);
        }

        .access-info {
            background: #f8faf9;
            border: 1px solid var(--cor-secundaria);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            animation: slideInUp 0.6s ease-out 0.3s both;
        }

        .access-level {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin: 2px;
            transition: all 0.3s ease;
        }

        .access-level:hover {
            transform: scale(1.05);
        }

        .level-master {
            background: var(--cor-primaria);
            color: white;
        }

        .level-filial {
            background: var(--cor-secundaria);
            color: var(--cor-escura);
        }

        /* Status de Acesso */
        .access-status {
            background: linear-gradient(135deg, var(--cor-secundaria) 0%, var(--cor-acento) 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            animation: slideInDown 0.5s ease-out;
        }

        /* Evolu√ß√£o de Avalia√ß√µes */
        .evolucao-melhoria {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid #28a745;
            border-radius: 8px;
            padding: 8px;
            animation: pulse 2s infinite;
        }

        .evolucao-regressao {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid #dc3545;
            border-radius: 8px;
            padding: 8px;
        }

        .evolucao-estavel {
            background: rgba(108, 117, 125, 0.1);
            border: 1px solid #6c757d;
            border-radius: 8px;
            padding: 8px;
        }

        .evolucao-primeira {
            background: rgba(143, 214, 148, 0.1);
            border: 1px solid var(--cor-secundaria);
            border-radius: 8px;
            padding: 8px;
        }

        /* Badge para classifica√ß√µes */
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .badge:hover {
            transform: scale(1.05);
        }

        .badge-success { background: var(--cor-secundaria); color: white; }
        .badge-primary { background: var(--cor-primaria); color: white; }
        .badge-warning { background: #ffc107; color: #212529; }
        .badge-danger { background: #dc3545; color: white; }
        .badge-secondary { background: var(--cor-neutra); color: white; }

        /* Responsivo */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .main-header h1 {
                font-size: 2em;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .rating-container {
                justify-content: center;
            }

            .nav-btn {
                padding: 12px 20px;
                font-size: 14px;
                margin: 5px;
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Anima√ß√µes de entrada escalonada */
        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        .form-group:nth-child(4) { animation-delay: 0.4s; }
        .form-group:nth-child(5) { animation-delay: 0.5s; }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        .competencia-card:nth-child(1) { animation-delay: 0.1s; }
        .competencia-card:nth-child(2) { animation-delay: 0.2s; }
        .competencia-card:nth-child(3) { animation-delay: 0.3s; }
        .competencia-card:nth-child(4) { animation-delay: 0.4s; }
        .competencia-card:nth-child(5) { animation-delay: 0.5s; }
        .competencia-card:nth-child(6) { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <!-- Header Principal -->
    <header class="main-header">
        <div class="container">
            <h1>üéØ SISTEMA DE AVALIA√á√ÉO DE DESEMPENHO</h1>
            <p>Avalia√ß√£o de Desempenho e Potencial de Lideran√ßa</p>
        </div>

    <!-- Cr√©ditos do Desenvolvedor -->
    <footer style="background: var(--cor-primaria); color: white; text-align: center; padding: 15px; margin-top: 50px; animation: slideInUp 0.6s ease-out;">
        <div class="container">
            <p style="margin: 2px 0; font-size: 11px; opacity: 0.7;">
                Desenvolvido por Juliano Patrick | julianocorrea@bateforte.com.br | Sistema de Avalia√ß√£o de Desempenho v2.0 ¬© 2025

            </p>
        </div>
    </footer>
    </header>

    <div class="container">
        <!-- Menu de Navega√ß√£o -->
        <nav class="nav-menu">
            <button class="nav-btn active" onclick="showSection('home')">üè† Home</button>
            <button class="nav-btn" onclick="showSection('avaliacao')">üìù Nova Avalia√ß√£o</button>
            <button class="nav-btn" id="btnHistorico" onclick="verificarAcessoHistorico()">üìã Hist√≥rico</button>
            <button class="nav-btn" onclick="showSection('relatorios')">üìä Relat√≥rios</button>
            <button class="nav-btn" id="btnConfiguracoes" onclick="verificarAcessoConfiguracoes()">‚öôÔ∏è Configura√ß√µes</button>
            
            <!-- Status da Conex√£o Online -->
            <div style="display: inline-block; margin-left: 20px; padding: 8px 15px; background: rgba(255,255,255,0.1); border-radius: 20px; font-size: 12px;">
                <span id="statusConexao">üîç Verificando...</span>
            </div>
        </nav>

        <!-- Se√ß√£o Home -->
        <section id="home" class="section active">
            <h2>üè† Bem-vindo ao Sistema de Avalia√ß√£o de Desempenho</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalAvaliacoesHome">0</div>
                    <div class="stat-label">Avalia√ß√µes Realizadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mediaGeralHome">0.00</div>
                    <div class="stat-label">M√©dia Geral</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="excelentesHome">0</div>
                    <div class="stat-label">Avalia√ß√µes Excelentes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="filiaisAtivasHome">0</div>
                    <div class="stat-label">Filiais Ativas</div>
                </div>
            </div>

            <div class="info-card">
                <h3>üìã Sobre o Sistema</h3>
                <p>Esse sistema √© uma ferramenta completa para avalia√ß√£o de desempenho e potencial de lideran√ßa, baseado em 6 compet√™ncias principais e 31 fatores espec√≠ficos.</p>
                
                <h4 style="margin-top: 20px;">üéØ Compet√™ncias Avaliadas:</h4>
                <ul style="margin: 15px 0; padding-left: 30px;">
                    <li><strong>Comunica√ß√£o e Influ√™ncia</strong> - 5 fatores</li>
                    <li><strong>Disciplina de Execu√ß√£o</strong> - 5 fatores</li>
                    <li><strong>Foco em Resultados</strong> - 5 fatores</li>
                    <li><strong>Foco no Cliente/Tutor</strong> - 5 fatores</li>
                    <li><strong>Lideran√ßa e Gest√£o de Pessoas</strong> - 6 fatores</li>
                    <li><strong>Postura de Dono</strong> - 5 fatores</li>
                </ul>

                <h4>üìä Classifica√ß√µes:</h4>
                <ul style="margin: 15px 0; padding-left: 30px;">
                    <li><strong>EXCELENTE</strong> - 4.5 a 5.0 pontos</li>
                    <li><strong>BOM</strong> - 3.5 a 4.4 pontos</li>
                    <li><strong>REGULAR</strong> - 2.5 a 3.4 pontos</li>
                    <li><strong>PRECISA MELHORAR</strong> - 1.0 a 2.4 pontos</li>
                </ul>

                <h4>üîê Controle de Acesso:</h4>
                <p style="margin: 15px 0;">O hist√≥rico de avalia√ß√µes √© protegido por senhas espec√≠ficas para cada filial, garantindo que apenas usu√°rios autorizados tenham acesso aos dados de sua unidade.</p>
            </div>
        </section>

        <!-- Se√ß√£o Nova Avalia√ß√£o -->
        <section id="avaliacao" class="section">
            <h2>üìù Nova Avalia√ß√£o</h2>

            <!-- Dados Pessoais -->
            <div class="info-card">
                <h3>üë§ Dados Pessoais</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="matriculaAvaliado">Matr√≠cula do Avaliado *</label>
                        <input type="text" id="matriculaAvaliado" required placeholder="Digite a matr√≠cula...">
                    </div>
                    <div class="form-group">
                        <label for="nomeAvaliado">Nome do Avaliado</label>
                        <input type="text" id="nomeAvaliado" readonly style="background: #f0f0f0;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="funcaoAvaliado">Fun√ß√£o do Avaliado</label>
                        <input type="text" id="funcaoAvaliado" readonly style="background: #f0f0f0;">
                    </div>
                    <div class="form-group">
                        <label for="filial">Filial</label>
                        <input type="text" id="filial" readonly style="background: #f0f0f0;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="regional">Regional</label>
                        <input type="text" id="regional" readonly style="background: #f0f0f0;">
                    </div>
                    <div class="form-group">
                        <!-- Campo vazio para manter o grid alinhado -->
                    </div>
                </div>
                
                <hr style="margin: 30px 0; border: 1px solid #e0e0e0;">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="matriculaGestor">Matr√≠cula do Gestor *</label>
                        <input type="text" id="matriculaGestor" required placeholder="Digite a matr√≠cula do gestor...">
                    </div>
                    <div class="form-group">
                        <label for="nomeGestor">Nome do Gestor</label>
                        <input type="text" id="nomeGestor" readonly style="background: #f0f0f0;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="funcaoGestor">Fun√ß√£o do Gestor</label>
                        <input type="text" id="funcaoGestor" readonly style="background: #f0f0f0;">
                    </div>
                    <div class="form-group">
                        <!-- Campo vazio para manter o grid alinhado -->
                    </div>
                </div>
            </div>

            <!-- Progresso -->
            <div class="progress-container">
                <h3>üìä Progresso da Avalia√ß√£o</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0 de 31 fatores avaliados</div>
            </div>

            <!-- Compet√™ncias -->
            <div id="competenciasContainer">
                <!-- Ser√° preenchido dinamicamente -->
            </div>

            <!-- Feedback -->
            <div class="info-card">
                <h3>üí¨ Feedback e Coment√°rios</h3>
                <div class="form-group">
                    <label for="pontosFortes">Pontos Fortes</label>
                    <textarea id="pontosFortes" rows="4" placeholder="Principais pontos fortes identificados..."></textarea>
                </div>
                <div class="form-group">
                    <label for="oportunidades">Oportunidades de Desenvolvimento</label>
                    <textarea id="oportunidades" rows="4" placeholder="√Åreas que precisam de desenvolvimento..."></textarea>
                </div>
                <div class="form-group">
                    <label for="comentarios">Coment√°rios Gerais</label>
                    <textarea id="comentarios" rows="4" placeholder="Coment√°rios adicionais sobre a avalia√ß√£o..."></textarea>
                </div>
            </div>

            <!-- Resultado -->
            <div id="resultadoCard" class="resultado-card">
                <h3>üìä Resultado da Avalia√ß√£o</h3>
                <div class="pontuacao-display" id="pontuacaoDisplay">0.00/5.00</div>
                <div class="classificacao-display" id="classificacaoDisplay">-</div>
                <div id="laudoResumo" style="margin-top: 20px; font-size: 1.1em; line-height: 1.6;"></div>
            </div>

            <!-- A√ß√µes -->
            <div style="text-align: center; margin: 30px 0;">
                <button class="btn btn-info" onclick="calcularResultado()">üìä Calcular Resultado</button>
                <button class="btn btn-success" onclick="salvarAvaliacao()" id="btnSalvar" disabled>üíæ Salvar Avalia√ß√£o</button>
                <button class="btn btn-warning" onclick="gerarRelatorio()" id="btnRelatorio" disabled>üìÑ Gerar Relat√≥rio</button>
                <button class="btn" onclick="limparFormulario()">üóëÔ∏è Limpar Formul√°rio</button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Processando...</p>
            </div>
        </section>

        <!-- Se√ß√£o de Login para Configura√ß√µes -->
        <section id="loginConfiguracoes" class="section">
            <h2>‚öôÔ∏è Acesso √†s Configura√ß√µes</h2>
            
            <div class="login-card">
                <h3 class="login-title">üîí Digite a Senha de Configura√ß√£o</h3>
                
                <div class="form-group">
                    <input type="password" id="senhaConfiguracoes" class="login-input" placeholder="Digite a senha..." onkeypress="verificarEnterConfig(event)">
                </div>
                
                <button class="btn btn-success" onclick="validarSenhaConfiguracoes()">üîì Acessar Configura√ß√µes</button>
                <button class="btn" onclick="showSection('home')">‚ùå Cancelar</button>
                
                <div class="access-info">
                    <h4>‚ÑπÔ∏è Informa√ß√µes de Acesso</h4>
                    <p><strong>√Årea Restrita:</strong></p>
                    <ul style="text-align: left; margin: 15px 0;">
                        <li>üîí Acesso apenas para administradores</li>
                        <li>‚öôÔ∏è Configura√ß√£o de colaboradores e gestores</li>
                        <li>üìã Importa√ß√£o de dados via planilha</li>
                    </ul>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>Contato:</strong> julianocorrea@bateforte.com.br
                    </p>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Configura√ß√µes -->
        <section id="configuracoes" class="section">
            <div id="configStatus" class="access-status" style="display: none; background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: #212529; padding: 20px; border-radius: 12px; margin: 25px 0; text-align: center; font-weight: bold; animation: slideInDown 0.5s ease-out;">
                <!-- Status ser√° preenchido dinamicamente -->
            </div>

            <h2>‚öôÔ∏è Configura√ß√µes do Sistema</h2>

            <!-- Estat√≠sticas das Configura√ß√µes -->
            <div class="stats-grid">
                <div class="stat-card" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);">
                    <div class="stat-number" id="totalColaboradores">0</div>
                    <div class="stat-label">Colaboradores Cadastrados</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);">
                    <div class="stat-number" id="totalGestoresConfig">0</div>
                    <div class="stat-label">Gestores Cadastrados</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: #212529;">
                    <div class="stat-number" id="ultimaImportacao">Nunca</div>
                    <div class="stat-label">√öltima Importa√ß√£o</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #6f42c1 0%, #59359a 100%);">
                    <div class="stat-number" id="statusSistema">Ativo</div>
                    <div class="stat-label">Status do Sistema</div>
                </div>
            </div>

            <!-- Importa√ß√£o de Colaboradores -->
            <div class="info-card">
                <h3>üë• Importar Colaboradores</h3>
                <p>Fa√ßa upload de uma planilha com os dados dos colaboradores. <strong>Formato requerido: Matricula;Nome;Funcao;Filial;Regional</strong></p>
                
                <div class="form-group">
                    <label for="arquivoColaboradores">Arquivo de Colaboradores (CSV ou Excel)</label>
                    <input type="file" id="arquivoColaboradores" accept=".csv,.xlsx,.xls" style="width: 100%; padding: 12px; border: 2px dashed var(--cor-primaria); border-radius: 8px; background: var(--cor-clara);">
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn btn-info" onclick="importarColaboradores()">üìã Importar Colaboradores</button>
                    <button class="btn btn-warning" onclick="baixarModeloColaboradores()">üì• Baixar Modelo</button>
                    <button class="btn btn-danger" onclick="limparColaboradores()">üóëÔ∏è Limpar Dados</button>
                    <button class="btn" onclick="debugArquivo('colaboradores')" style="background: #6f42c1; color: white;">üîç Debug Arquivo</button>
                </div>

                <div id="previewColaboradores" style="display: none;">
                    <h4>üìã Preview dos Dados:</h4>
                    <div class="table-container" style="max-height: 200px; overflow-y: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Matr√≠cula</th>
                                    <th>Nome</th>
                                    <th>Fun√ß√£o</th>
                                    <th>Filial</th>
                                    <th>Regional</th>
                                </tr>
                            </thead>
                            <tbody id="previewColaboradoresBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Importa√ß√£o de Gestores -->
            <div class="info-card">
                <h3>üëî Importar Gestores</h3>
                <p>Fa√ßa upload de uma planilha com os dados dos gestores. <strong>Formato requerido: Matricula;Nome;Funcao;Filial;Regional</strong></p>
                
                <div class="form-group">
                    <label for="arquivoGestores">Arquivo de Gestores (CSV ou Excel)</label>
                    <input type="file" id="arquivoGestores" accept=".csv,.xlsx,.xls" style="width: 100%; padding: 12px; border: 2px dashed var(--cor-primaria); border-radius: 8px; background: var(--cor-clara);">
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn btn-info" onclick="importarGestores()">üëî Importar Gestores</button>
                    <button class="btn btn-warning" onclick="baixarModeloGestores()">üì• Baixar Modelo</button>
                    <button class="btn btn-danger" onclick="limparGestores()">üóëÔ∏è Limpar Dados</button>
                    <button class="btn" onclick="debugArquivo('gestores')" style="background: #6f42c1; color: white;">üîç Debug Arquivo</button>
                </div>

                <div id="previewGestores" style="display: none;">
                    <h4>üìã Preview dos Dados:</h4>
                    <div class="table-container" style="max-height: 200px; overflow-y: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Matr√≠cula</th>
                                    <th>Nome</th>
                                    <th>Fun√ß√£o</th>
                                    <th>Filial</th>
                                    <th>Regional</th>
                                </tr>
                            </thead>
                            <tbody id="previewGestoresBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Configura√ß√µes Online e Sincroniza√ß√£o -->
            <div class="info-card">
                <h3>üåê Sincroniza√ß√£o Online</h3>
                <p>Configure a sincroniza√ß√£o autom√°tica entre diferentes computadores e dispositivos.</p>
                
                <!-- Status da Sincroniza√ß√£o -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid var(--cor-primaria);">
                    <h4>üìä Status da Sincroniza√ß√£o</h4>
                    <div style="display: grid; grid-template-columns: auto 1fr; gap: 10px; align-items: center; margin: 10px 0;">
                        <span><strong>Conex√£o:</strong></span>
                        <span id="statusConexaoDetalhado">üîç Verificando...</span>
                        
                        <span><strong>Empresa:</strong></span>
                        <span id="empresaConfigurada">‚ùå N√£o configurada</span>
                        
                        <span><strong>√öltima Sync:</strong></span>
                        <span id="ultimaSincronizacao">‚ùå Nunca</span>
                        
                        <span><strong>Modo:</strong></span>
                        <span id="modoOperacao">üì± Local</span>
                    </div>
                </div>

                <!-- Configura√ß√£o da Empresa -->
                <div class="form-row">
                    <div class="form-group">
                        <label>üè¢ Configurar Empresa/Organiza√ß√£o</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="inputEmpresaId" placeholder="Ex: EMPRESA_ABC_2025" style="flex: 1;">
                            <button class="btn btn-info" onclick="configurarEmpresaManual()">üè¢ Configurar</button>
                        </div>
                        <small style="color: #666; margin-top: 5px; display: block;">
                            ‚ÑπÔ∏è Este ID ser√° usado para sincronizar dados entre diferentes computadores da mesma empresa.
                        </small>
                    </div>
                </div>

                <!-- Controles de Sincroniza√ß√£o -->
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn btn-success" onclick="sincronizarDadosManual()" id="btnSincronizar">üîÑ Sincronizar Agora</button>
                    <button class="btn btn-warning" onclick="resetarConfiguracaoOnline()">üóëÔ∏è Resetar Configura√ß√£o</button>
                    <button class="btn btn-info" onclick="testarConexaoOnline()">üîç Testar Conex√£o</button>
                </div>

                <!-- Informa√ß√µes sobre Sincroniza√ß√£o -->
                <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>üí° Como Funciona a Sincroniza√ß√£o</h4>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                        <li><strong>Autom√°tica:</strong> Sincroniza a cada 5 minutos automaticamente</li>
                        <li><strong>Entre Dispositivos:</strong> Todos com o mesmo ID de empresa compartilham dados</li>
                        <li><strong>Resolu√ß√£o de Conflitos:</strong> √öltima modifica√ß√£o sempre vence</li>
                        <li><strong>Backup na Nuvem:</strong> Dados salvos automaticamente online</li>
                        <li><strong>Modo Offline:</strong> Funciona sem internet, sincroniza quando conectar</li>
                    </ul>
                </div>

                <!-- Logs de Sincroniza√ß√£o -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>üìã Log de Sincroniza√ß√£o</h4>
                    <div id="logSincronizacao" style="max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px; background: #fff; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <div style="color: #666;">Sistema iniciando... aguarde logs de sincroniza√ß√£o.</div>
                    </div>
                    <button class="btn btn-sm" onclick="limparLogSync()" style="margin-top: 10px;">üóëÔ∏è Limpar Log</button>
                </div>
            </div>

            <!-- Configura√ß√µes Avan√ßadas -->
            <div class="info-card">
                <h3>üîß Configura√ß√µes Avan√ßadas</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Backup dos Dados</label>
                        <button class="btn btn-success" onclick="exportarBackupCompleto()">üíæ Exportar Backup Completo</button>
                    </div>
                    <div class="form-group">
                        <label>Limpar Sistema</label>
                        <button class="btn btn-danger" onclick="resetarSistema()">‚ö†Ô∏è Resetar Sistema</button>
                    </div>
                </div>
            </div>

            <!-- A√ß√µes -->
            <div style="text-align: center; margin: 30px 0;">
                <button class="btn btn-warning" onclick="logoutConfiguracoes()">üö™ Sair das Configura√ß√µes</button>
            </div>
        </section>

        <!-- Se√ß√£o de Login para Hist√≥rico -->
        <section id="loginHistorico" class="section">
            <h2>üîê Acesso ao Hist√≥rico</h2>
            
            <div class="login-card">
                <h3 class="login-title">üîí Digite a Senha de Acesso</h3>
                
                <div class="form-group">
                    <input type="password" id="senhaAcesso" class="login-input" placeholder="Digite a senha..." onkeypress="verificarEnter(event)">
                </div>
                
                <button class="btn btn-success" onclick="validarSenhaHistorico()">üîì Acessar Hist√≥rico</button>
                <button class="btn" onclick="showSection('home')">‚ùå Cancelar</button>
                
                <div class="access-info">
                    <h4>‚ÑπÔ∏è Informa√ß√µes de Acesso</h4>
                    <p><strong>Controle de Acesso:</strong></p>
                    <ul style="text-align: left; margin: 15px 0;">
                        <li>üîë Cada filial possui sua senha espec√≠fica</li>
                        <li>üîí Entre em contato com o administrador para obter sua senha</li>
                    </ul>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>Contato:</strong> julianocorrea@bateforte.com.br
                    </p>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Hist√≥rico -->
        <section id="historico" class="section">
            <div id="accessStatus" class="access-status" style="display: none;">
                <!-- Status ser√° preenchido dinamicamente -->
            </div>

            <h2>üìã Hist√≥rico de Avalia√ß√µes</h2>

            <!-- Estat√≠sticas -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalAvaliacoes">0</div>
                    <div class="stat-label">Total de Avalia√ß√µes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mediaGeral">0.00</div>
                    <div class="stat-label">M√©dia Geral</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="excelentes">0</div>
                    <div class="stat-label">Excelentes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="precisamMelhorar">0</div>
                    <div class="stat-label">Precisam Melhorar</div>
                </div>
            </div>

            <!-- Filtros -->
            <div class="filters-card">
                <h3>üîç Filtros</h3>
                <div class="filters-grid">
                    <div class="form-group">
                        <label for="filtroNome">Nome do Avaliado</label>
                        <input type="text" id="filtroNome" placeholder="Digite o nome...">
                    </div>
                    <div class="form-group">
                        <label for="filtroGestor">Gestor</label>
                        <input type="text" id="filtroGestor" placeholder="Digite o nome do gestor...">
                    </div>
                    <div class="form-group">
                        <label for="filtroClassificacao">Classifica√ß√£o</label>
                        <select id="filtroClassificacao">
                            <option value="">Todas</option>
                            <option value="EXCELENTE">EXCELENTE</option>
                            <option value="BOM">BOM</option>
                            <option value="REGULAR">REGULAR</option>
                            <option value="PRECISA MELHORAR">PRECISA MELHORAR</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filtroDataInicio">Data In√≠cio</label>
                        <input type="date" id="filtroDataInicio">
                    </div>
                    <div class="form-group">
                        <label for="filtroDataFim">Data Fim</label>
                        <input type="date" id="filtroDataFim">
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="aplicarFiltros()">üîç Filtrar</button>
                    <button class="btn" onclick="limparFiltros()">üóëÔ∏è Limpar Filtros</button>
                    <button class="btn btn-danger" onclick="logout()">üö™ Sair do Hist√≥rico</button>
                </div>
            </div>

            <!-- Tabela de Hist√≥rico -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Avaliado</th>
                            <th>Fun√ß√£o</th>
                            <th>Matr√≠cula</th>
                            <th>Gestor</th>
                            <th>Filial</th>
                            <th>Pontua√ß√£o</th>
                            <th>Classifica√ß√£o</th>
                            <th>Evolu√ß√£o</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="historicoTableBody">
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 30px;">
                                üì≠ Nenhuma avalia√ß√£o encontrada
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Se√ß√£o Relat√≥rios -->
        <section id="relatorios" class="section">
            <h2>üìä Relat√≥rios e An√°lises</h2>

            <!-- Filtros para Relat√≥rios -->
            <div class="filters-card">
                <h3>üîç Filtros para Relat√≥rios</h3>
                <div class="filters-grid">
                    <div class="form-group">
                        <label for="filtroRelatorioFilial">Filtrar por Filial</label>
                        <select id="filtroRelatorioFilial" onchange="aplicarFiltrosRelatorio()">
                            <option value="">Todas as filiais</option>
                            <option value="743">743 - MS</option>
                            <option value="264">264 - SC</option>
                            <option value="753">753 - MT</option>
                            <option value="364">364 - DF</option>
                            <option value="713">713 - SP</option>
                            <option value="468">468 - MT</option>
                            <option value="892">892 - SP</option>
                            <option value="723">723 - SP</option>
                            <option value="230">230 - SP</option>
                            <option value="773">773 - RS</option>
                            <option value="473">473 - MT</option>
                            <option value="167">167 - MS</option>
                            <option value="20">20 - AGP</option>
                        </select>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="limparFiltrosRelatorio()">üóëÔ∏è Limpar Filtros</button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalAvaliacoesRel">0</div>
                    <div class="stat-label">Total de Avalia√ß√µes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mediaGeralRel">0.00</div>
                    <div class="stat-label">M√©dia Geral</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="colaboradoresMelhorando">0</div>
                    <div class="stat-label">Colaboradores Melhorando</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalGestores">0</div>
                    <div class="stat-label">Gestores √önicos</div>
                </div>
            </div>

            <div class="info-card">
                <h3>üìà An√°lise de Desempenho por Compet√™ncia</h3>
                <div id="analiseCompetencias">
                    <p style="text-align: center; color: #666; padding: 20px;">üìä Execute algumas avalia√ß√µes para ver a an√°lise</p>
                </div>
            </div>

            <div class="info-card">
                <h3>üè¢ An√°lise por Filial</h3>
                <div id="analiseFiliais">
                    <p style="text-align: center; color: #666; padding: 20px;">üìä Execute algumas avalia√ß√µes para ver a an√°lise</p>
                </div>
            </div>

            <div class="info-card">
                <h3>üëî An√°lise por Fun√ß√£o</h3>
                <div id="analiseFuncoes">
                    <p style="text-align: center; color: #666; padding: 20px;">üìä Execute algumas avalia√ß√µes para ver a an√°lise</p>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button class="btn btn-info" onclick="gerarRelatorioCompleto()">üìÑ Gerar Relat√≥rio Completo</button>
                <button class="btn btn-warning" onclick="exportarDados()">üì• Exportar Dados</button>
            </div>
        </section>
    </div>

    <!-- Modal para Detalhes -->
    <div id="modalDetalhes" class="modal">
        <div class="modal-content">
            <div id="conteudoModal"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="fecharModal()">‚ùå Fechar</button>
            </div>
        </div>
    </div>

    <script>
        // =====================================================
        // SISTEMA DE SINCRONIZA√á√ÉO ONLINE
        // =====================================================

        // Configura√ß√µes da sincroniza√ß√£o online
        let configOnline = {
            ativo: false,
            empresaId: localStorage.getItem('empresa_id_gg') || '',
            ultimaSync: localStorage.getItem('ultima_sync_gg') || null,
            tentativasSync: 0,
            maxTentativas: 3
        };

        // Status da conex√£o
        let statusConexao = {
            online: navigator.onLine,
            sincronizando: false,
            ultimoErro: null
        };

        // =====================================================
        // DADOS E CONFIGURA√á√ïES (ATUALIZADA PARA ONLINE)
        // =====================================================

        const FILIAIS_REGIONAIS = {
            '743': 'MS', '264': 'SC', '753': 'MT', '364': 'DF',
            '713': 'SP', '468': 'MT', '892': 'SP', '723': 'SP',
            '230': 'SP', '773': 'RS', '473': 'MT', '167': 'MS', '20': 'AGP'
        };

        const SENHAS_ACESSO = {
            'GGMASTERJP': { tipo: 'master', filiais: ['all'], nome: 'Acesso Total - Todas as Filiais (JP)' },
            'GGMASTER': { tipo: 'master', filiais: ['all'], nome: 'Acesso Total - Todas as Filiais' },
            'GG74301': { tipo: 'filial', filiais: ['743'], nome: 'Filial 743 - MS' },
            'GG26402': { tipo: 'filial', filiais: ['264'], nome: 'Filial 264 - SC' },
            'GG75303': { tipo: 'filial', filiais: ['753'], nome: 'Filial 753 - MT' },
            'GG36404': { tipo: 'filial', filiais: ['364'], nome: 'Filial 364 - DF' },
            'GG71305': { tipo: 'filial', filiais: ['713'], nome: 'Filial 713 - SP' },
            'GG46806': { tipo: 'filial', filiais: ['468'], nome: 'Filial 468 - MT' },
            'GG89207': { tipo: 'filial', filiais: ['892'], nome: 'Filial 892 - SP' },
            'GG72308': { tipo: 'filial', filiais: ['723'], nome: 'Filial 723 - SP' },
            'GG23009': { tipo: 'filial', filiais: ['230'], nome: 'Filial 230 - SP' },
            'GG77310': { tipo: 'filial', filiais: ['773'], nome: 'Filial 773 - RS' },
            'GG47311': { tipo: 'filial', filiais: ['473'], nome: 'Filial 473 - MT' },
            'GG16712': { tipo: 'filial', filiais: ['167'], nome: 'Filial 167 - MS' },
            'GG02013': { tipo: 'filial', filiais: ['20'], nome: 'Filial 20 - AGP' }
        };

        // API endpoints (configur√°vel)
        const API_CONFIG = {
            baseUrl: 'https://api-avaliacoes-gg.com', // Substituir pela URL real da API
            endpoints: {
                sync: '/sync',
                avaliacoes: '/avaliacoes',
                colaboradores: '/colaboradores',
                gestores: '/gestores',
                empresa: '/empresa'
            }
        };

        // =====================================================
        // FUN√á√ïES DE SINCRONIZA√á√ÉO ONLINE
        // =====================================================

        async function inicializarSistemaOnline() {
            console.log('üåê Inicializando sistema online...');
            
            // Verificar se empresa est√° configurada
            if (!configOnline.empresaId) {
                console.log('üè¢ Empresa n√£o configurada - modo offline');
                return false;
            }

            // Verificar conex√£o
            if (!navigator.onLine) {
                console.log('üì° Sem conex√£o - modo offline');
                return false;
            }

            // Tentar sincroniza√ß√£o inicial
            try {
                await sincronizarDados();
                configOnline.ativo = true;
                console.log('‚úÖ Sistema online ativo');
                atualizarStatusConexao();
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao inicializar online:', error);
                return false;
            }
        }

        async function sincronizarDados() {
            if (!configOnline.empresaId || !navigator.onLine) {
                console.log('‚ö†Ô∏è Sincroniza√ß√£o n√£o dispon√≠vel');
                return;
            }

            statusConexao.sincronizando = true;
            atualizarStatusConexao();

            try {
                console.log('üîÑ Iniciando sincroniza√ß√£o...');
                
                // 1. Buscar dados do servidor
                const dadosServidor = await buscarDadosServidor();
                
                // 2. Comparar com dados locais
                const conflitos = detectarConflitos(dadosServidor);
                
                // 3. Resolver conflitos (√∫ltimas modifica√ß√µes vencem)
                const dadosFinais = resolverConflitos(conflitos);
                
                // 4. Salvar dados atualizados localmente
                await salvarDadosLocalmente(dadosFinais);
                
                // 5. Enviar dados locais para servidor
                await enviarDadosServidor(dadosFinais);
                
                // 6. Atualizar timestamp da sincroniza√ß√£o
                configOnline.ultimaSync = new Date().toISOString();
                localStorage.setItem('ultima_sync_gg', configOnline.ultimaSync);
                
                console.log('‚úÖ Sincroniza√ß√£o conclu√≠da');
                mostrarAlerta('üåê Dados sincronizados com sucesso!', 'success');
                
            } catch (error) {
                console.error('‚ùå Erro na sincroniza√ß√£o:', error);
                statusConexao.ultimoErro = error.message;
                mostrarAlerta('‚ùå Erro na sincroniza√ß√£o: ' + error.message, 'danger');
            } finally {
                statusConexao.sincronizando = false;
                atualizarStatusConexao();
            }
        }

        async function buscarDadosServidor() {
            // Simula√ß√£o da API - substituir por chamada real
            console.log('üì• Buscando dados do servidor...');
            
            // Em um ambiente real, seria algo como:
            // const response = await fetch(`${API_CONFIG.baseUrl}${API_CONFIG.endpoints.sync}?empresa=${configOnline.empresaId}`);
            // return await response.json();
            
            // Simula√ß√£o para demonstra√ß√£o
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            return {
                avaliacoes: JSON.parse(localStorage.getItem('avaliacoes_gg_servidor') || '[]'),
                colaboradores: JSON.parse(localStorage.getItem('colaboradores_gg_servidor') || '{}'),
                gestores: JSON.parse(localStorage.getItem('gestores_gg_servidor') || '{}'),
                timestamp: localStorage.getItem('timestamp_servidor_gg') || new Date().toISOString()
            };
        }

        async function enviarDadosServidor(dados) {
            console.log('üì§ Enviando dados para servidor...');
            
            // Em um ambiente real, seria algo como:
            // const response = await fetch(`${API_CONFIG.baseUrl}${API_CONFIG.endpoints.sync}`, {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({ empresaId: configOnline.empresaId, dados })
            // });
            
            // Simula√ß√£o para demonstra√ß√£o
            await new Promise(resolve => setTimeout(resolve, 500));
            
            localStorage.setItem('avaliacoes_gg_servidor', JSON.stringify(dados.avaliacoes));
            localStorage.setItem('colaboradores_gg_servidor', JSON.stringify(dados.colaboradores));
            localStorage.setItem('gestores_gg_servidor', JSON.stringify(dados.gestores));
            localStorage.setItem('timestamp_servidor_gg', new Date().toISOString());
        }

        function detectarConflitos(dadosServidor) {
            const dadosLocais = {
                avaliacoes: avaliacoes,
                colaboradores: colaboradores,
                gestores: gestores,
                timestamp: localStorage.getItem('ultima_modificacao_gg') || new Date().toISOString()
            };

            return {
                servidor: dadosServidor,
                local: dadosLocais,
                temConflito: dadosServidor.timestamp !== dadosLocais.timestamp
            };
        }

        function resolverConflitos(conflitos) {
            console.log('üîß Resolvendo conflitos...');
            
            if (!conflitos.temConflito) {
                console.log('‚úÖ Nenhum conflito detectado');
                return conflitos.local;
            }

            // Estrat√©gia: √∫ltima modifica√ß√£o vence
            const timestampServidor = new Date(conflitos.servidor.timestamp);
            const timestampLocal = new Date(conflitos.local.timestamp);

            if (timestampServidor > timestampLocal) {
                console.log('üì• Dados do servidor s√£o mais recentes');
                return conflitos.servidor;
            } else {
                console.log('üì§ Dados locais s√£o mais recentes');
                return conflitos.local;
            }
        }

        async function salvarDadosLocalmente(dados) {
            avaliacoes = dados.avaliacoes || [];
            colaboradores = dados.colaboradores || {};
            gestores = dados.gestores || {};
            
            localStorage.setItem('avaliacoes_gg', JSON.stringify(avaliacoes));
            localStorage.setItem('colaboradores_gg', JSON.stringify(colaboradores));
            localStorage.setItem('gestores_gg', JSON.stringify(gestores));
            localStorage.setItem('ultima_modificacao_gg', new Date().toISOString());
            
            // Atualizar interface
            atualizarEstatisticasHome();
            if (acessoConfig) atualizarEstatisticasConfig();
            if (acessoAtivo) atualizarHistorico();
        }

        function configurarEmpresa() {
            const empresaId = prompt('üè¢ Digite o ID da sua empresa/organiza√ß√£o:\n\n(Este ID ser√° usado para sincronizar dados entre diferentes computadores)');
            
            if (empresaId && empresaId.trim()) {
                configOnline.empresaId = empresaId.trim().toUpperCase();
                localStorage.setItem('empresa_id_gg', configOnline.empresaId);
                
                mostrarAlerta(`üè¢ Empresa configurada: ${configOnline.empresaId}`, 'success');
                console.log('üè¢ Empresa configurada:', configOnline.empresaId);
                
                // Tentar sincroniza√ß√£o inicial
                setTimeout(() => {
                    sincronizarDados();
                }, 1000);
                
                return true;
            } else {
                mostrarAlerta('‚ùå ID da empresa √© obrigat√≥rio para sincroniza√ß√£o online', 'danger');
                return false;
            }
        }

        function atualizarStatusConexao() {
            statusConexao.online = navigator.onLine;
            
            // Atualizar indicador visual se existir
            const indicador = document.getElementById('statusConexao');
            if (indicador) {
                let status = '';
                let cor = '';
                
                if (!configOnline.empresaId) {
                    status = 'üè¢ Empresa n√£o configurada';
                    cor = '#ffc107';
                } else if (!statusConexao.online) {
                    status = 'üì° Offline';
                    cor = '#dc3545';
                } else if (statusConexao.sincronizando) {
                    status = 'üîÑ Sincronizando...';
                    cor = '#17a2b8';
                } else if (configOnline.ativo) {
                    status = 'üåê Online - Sincronizado';
                    cor = '#28a745';
                } else {
                    status = '‚ö†Ô∏è Online - N√£o sincronizado';
                    cor = '#ffc107';
                }
                
                indicador.innerHTML = status;
                indicador.style.color = cor;
            }
        }

        // =====================================================
        // EVENTOS DE CONEX√ÉO
        // =====================================================

        window.addEventListener('online', () => {
            console.log('üåê Conex√£o restaurada');
            statusConexao.online = true;
            atualizarStatusConexao();
            
            if (configOnline.empresaId) {
                setTimeout(() => {
                    sincronizarDados();
                }, 2000);
            }
        });

        window.addEventListener('offline', () => {
            console.log('üì° Conex√£o perdida');
            statusConexao.online = false;
            atualizarStatusConexao();
        });

        // =====================================================
        // SINCRONIZA√á√ÉO AUTOM√ÅTICA
        // =====================================================

        // Sincroniza√ß√£o autom√°tica a cada 5 minutos
        setInterval(() => {
            if (configOnline.ativo && navigator.onLine && !statusConexao.sincronizando) {
                console.log('‚è∞ Sincroniza√ß√£o autom√°tica...');
                sincronizarDados();
            }
        }, 5 * 60 * 1000); // 5 minutos

        // Sincroniza√ß√£o ao sair da p√°gina
        window.addEventListener('beforeunload', () => {
            if (configOnline.ativo && navigator.onLine) {
                // Sincroniza√ß√£o s√≠ncrona r√°pida
                navigator.sendBeacon(`${API_CONFIG.baseUrl}${API_CONFIG.endpoints.sync}`, 
                    JSON.stringify({
                        empresaId: configOnline.empresaId,
                        dados: { avaliacoes, colaboradores, gestores }
                    })
                );
            }
        });

        // =====================================================
        // FUN√á√ïES DE INTERFACE PARA SINCRONIZA√á√ÉO ONLINE
        // =====================================================

        function configurarEmpresaManual() {
            const input = document.getElementById('inputEmpresaId');
            const empresaId = input.value.trim();
            
            if (!empresaId) {
                mostrarAlerta('‚ùå Digite um ID v√°lido para a empresa!', 'danger');
                return;
            }

            configOnline.empresaId = empresaId.toUpperCase();
            localStorage.setItem('empresa_id_gg', configOnline.empresaId);
            
            input.value = '';
            atualizarInterfaceOnline();
            adicionarLogSync(`üè¢ Empresa configurada: ${configOnline.empresaId}`);
            
            mostrarAlerta(`üè¢ Empresa configurada: ${configOnline.empresaId}`, 'success');
            
            // Tentar sincroniza√ß√£o inicial
            setTimeout(() => {
                sincronizarDadosManual();
            }, 1000);
        }

        async function sincronizarDadosManual() {
            if (!configOnline.empresaId) {
                mostrarAlerta('‚ùå Configure a empresa primeiro!', 'danger');
                return;
            }

            const btn = document.getElementById('btnSincronizar');
            const textoOriginal = btn.textContent;
            
            btn.textContent = 'üîÑ Sincronizando...';
            btn.disabled = true;
            
            try {
                await sincronizarDados();
                btn.textContent = '‚úÖ Sincronizado!';
                setTimeout(() => {
                    btn.textContent = textoOriginal;
                    btn.disabled = false;
                }, 2000);
            } catch (error) {
                btn.textContent = '‚ùå Erro';
                setTimeout(() => {
                    btn.textContent = textoOriginal;
                    btn.disabled = false;
                }, 2000);
            }
        }

        function resetarConfiguracaoOnline() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Isso ir√° resetar todas as configura√ß√µes online!\n\nOs dados locais ser√£o mantidos, mas a sincroniza√ß√£o ser√° desconfigurada.\n\nContinuar?')) {
                configOnline.empresaId = '';
                configOnline.ativo = false;
                configOnline.ultimaSync = null;
                
                localStorage.removeItem('empresa_id_gg');
                localStorage.removeItem('ultima_sync_gg');
                
                document.getElementById('inputEmpresaId').value = '';
                atualizarInterfaceOnline();
                limparLogSync();
                
                adicionarLogSync('üóëÔ∏è Configura√ß√£o online resetada');
                mostrarAlerta('üóëÔ∏è Configura√ß√£o online resetada! Sistema em modo local.', 'warning');
            }
        }

        async function testarConexaoOnline() {
            adicionarLogSync('üîç Testando conex√£o...');
            
            if (!navigator.onLine) {
                adicionarLogSync('‚ùå Sem conex√£o com a internet');
                mostrarAlerta('‚ùå Sem conex√£o com a internet!', 'danger');
                return;
            }

            try {
                // Simular teste de conex√£o com a API
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Em um ambiente real seria:
                // const response = await fetch(`${API_CONFIG.baseUrl}/health`);
                
                adicionarLogSync('‚úÖ Conex√£o com servidor OK');
                mostrarAlerta('‚úÖ Conex√£o testada com sucesso!', 'success');
                
            } catch (error) {
                adicionarLogSync('‚ùå Erro de conex√£o: ' + error.message);
                mostrarAlerta('‚ùå Erro na conex√£o: ' + error.message, 'danger');
            }
        }

        function atualizarInterfaceOnline() {
            // Atualizar status detalhado
            const statusDetalhado = document.getElementById('statusConexaoDetalhado');
            const empresaConfig = document.getElementById('empresaConfigurada');
            const ultimaSync = document.getElementById('ultimaSincronizacao');
            const modoOp = document.getElementById('modoOperacao');

            if (statusDetalhado) {
                if (!navigator.onLine) {
                    statusDetalhado.innerHTML = 'üî¥ Offline';
                    statusDetalhado.style.color = '#dc3545';
                } else if (statusConexao.sincronizando) {
                    statusDetalhado.innerHTML = 'üü° Sincronizando...';
                    statusDetalhado.style.color = '#ffc107';
                } else {
                    statusDetalhado.innerHTML = 'üü¢ Online';
                    statusDetalhado.style.color = '#28a745';
                }
            }

            if (empresaConfig) {
                if (configOnline.empresaId) {
                    empresaConfig.innerHTML = `‚úÖ ${configOnline.empresaId}`;
                    empresaConfig.style.color = '#28a745';
                } else {
                    empresaConfig.innerHTML = '‚ùå N√£o configurada';
                    empresaConfig.style.color = '#dc3545';
                }
            }

            if (ultimaSync) {
                if (configOnline.ultimaSync) {
                    const data = new Date(configOnline.ultimaSync);
                    ultimaSync.innerHTML = `‚úÖ ${data.toLocaleString('pt-BR')}`;
                    ultimaSync.style.color = '#28a745';
                } else {
                    ultimaSync.innerHTML = '‚ùå Nunca';
                    ultimaSync.style.color = '#dc3545';
                }
            }

            if (modoOp) {
                if (configOnline.ativo) {
                    modoOp.innerHTML = 'üåê Online Sincronizado';
                    modoOp.style.color = '#28a745';
                } else if (configOnline.empresaId) {
                    modoOp.innerHTML = 'üîÑ Online Configurado';
                    modoOp.style.color = '#ffc107';
                } else {
                    modoOp.innerHTML = 'üì± Modo Local';
                    modoOp.style.color = '#6c757d';
                }
            }

            // Atualizar status principal
            atualizarStatusConexao();
        }

        function adicionarLogSync(mensagem) {
            const log = document.getElementById('logSincronizacao');
            if (!log) return;

            const agora = new Date().toLocaleTimeString('pt-BR');
            const novaLinha = document.createElement('div');
            novaLinha.innerHTML = `<span style="color: #666;">[${agora}]</span> ${mensagem}`;
            
            log.appendChild(novaLinha);
            log.scrollTop = log.scrollHeight;

            // Manter apenas √∫ltimas 50 linhas
            while (log.children.length > 50) {
                log.removeChild(log.firstChild);
            }

            // Log no console tamb√©m
            console.log(`[SYNC ${agora}] ${mensagem}`);
        }

        function limparLogSync() {
            const log = document.getElementById('logSincronizacao');
            if (log) {
                log.innerHTML = '<div style="color: #666;">Log limpo...</div>';
            }
        }

        // Atualizar interface online periodicamente
        setInterval(() => {
            if (document.getElementById('statusConexaoDetalhado')) {
                atualizarInterfaceOnline();
            }
        }, 10000); // A cada 10 segundos

        const COMPETENCIAS = [
            {
                nome: 'COMUNICA√á√ÉO E INFLU√äNCIA',
                fatores: [
                    'Tem clareza, √© emp√°tico(a) e inclusivo(a) na sua comunica√ß√£o.',
                    'Possui habilidades em comunicar temas cr√≠ticos, transmitindo confian√ßa ao time.',
                    '√â influenciador(a) e inspira seu time e a rede de relacionamento pelo exemplo.',
                    'Respeita as opini√µes divergentes, escuta de maneira aberta.',
                    'Cria um ambiente de seguran√ßa e confian√ßa m√∫tua.'
                ]
            },
            {
                nome: 'DISCIPLINA DE EXECU√á√ÉO',
                fatores: [
                    'Garante planejamento e execu√ß√£o com efici√™ncia dentro dos prazos.',
                    'Constr√≥i regras e processos e busca eliminar burocracias desnecess√°rias.',
                    'Assume responsabilidade, cumpre normas e procedimentos.',
                    'Estimula o time para que esteja comprometido com prazos e entregas.',
                    'Garante n√≠veis excelentes de qualidade nas entregas.'
                ]
            },
            {
                nome: 'FOCO EM RESULTADOS',
                fatores: [
                    'Possui consist√™ncia nas entregas.',
                    'Tem flexibilidade para liderar diferentes frentes.',
                    'Elabora e cumpre planos de a√ß√µes para o atingimento das metas.',
                    'Conhece o neg√≥cio e acompanha resultados atrav√©s de dados.',
                    'Estimula o time para possu√≠rem vis√£o cr√≠tica e trazerem solu√ß√µes.'
                ]
            },
            {
                nome: 'FOCO NO CLIENTE/TUTOR',
                fatores: [
                    'Entende, prioriza e antecipa as necessidades dos clientes.',
                    'Constr√≥i alian√ßas com clientes, pares, √°reas parceiras.',
                    'Implementa novas solu√ß√µes para atingir expectativas do cliente.',
                    'Direciona o time para conhecer as necessidades dos clientes.',
                    'Desenvolve a√ß√µes efetivas e de sucesso para os clientes.'
                ]
            },
            {
                nome: 'LIDERAN√áA E GEST√ÉO DE PESSOAS',
                fatores: [
                    'Age com clareza na distribui√ß√£o dos pap√©is e responsabilidades.',
                    'Sabe identificar desafios compat√≠veis com a capacidade de cada um.',
                    'Estimula e conduz o time para que alcance/supere as metas.',
                    'Direciona o time com clareza para as atividades.',
                    'Orienta, d√° feedbacks efetivos e acompanha evolu√ß√µes.',
                    'Possui preocupa√ß√£o genu√≠na com as pessoas e desenvolve liderados.'
                ]
            },
            {
                nome: 'POSTURA DE DONO',
                fatores: [
                    'Possui senso de urg√™ncia e sabe direcionar o time.',
                    'Assume responsabilidade e n√£o terceiriza para outras √°reas.',
                    '√â exemplo e estimula o time a ser inconformado com entregas.',
                    '√â atento √†s tend√™ncias de mercado e busca aplic√°-las.',
                    '√â atento e gerencia os desperd√≠cios e custos.'
                ]
            }
        ];

        // Dados do sistema
        let avaliacoes = JSON.parse(localStorage.getItem('avaliacoes_gg') || '[]');
        let avaliacaoAtual = null;
        let acessoAtivo = null; // Controla qual acesso est√° ativo
        let acessoConfig = false; // Controla acesso √†s configura√ß√µes
        let colaboradores = JSON.parse(localStorage.getItem('colaboradores_gg') || '{}');
        let gestores = JSON.parse(localStorage.getItem('gestores_gg') || '{}');

        const SENHA_CONFIGURACOES = 'GGMASTERJP';

        // =====================================================
        // FUN√á√ïES DE ANIMA√á√ÉO (ADICIONADAS)
        // =====================================================

        function animarNumero(elementId, valorFinal, duracao = 1000) {
            const elemento = document.getElementById(elementId);
            if (!elemento) return;

            const valorInicial = parseFloat(elemento.textContent) || 0;
            const inicio = performance.now();

            function animar(tempoAtual) {
                const decorrido = tempoAtual - inicio;
                const progresso = Math.min(decorrido / duracao, 1);
                
                // Easing function (ease-out)
                const progressoSuave = 1 - Math.pow(1 - progresso, 3);
                
                const valorAtual = valorInicial + (valorFinal - valorInicial) * progressoSuave;
                
                if (elementId.includes('media') || elementId.includes('Media')) {
                    elemento.textContent = valorAtual.toFixed(2);
                } else {
                    elemento.textContent = Math.round(valorAtual);
                }

                if (progresso < 1) {
                    requestAnimationFrame(animar);
                }
            }

            requestAnimationFrame(animar);
        }

        function adicionarAnimacao(elemento, classe) {
            elemento.classList.add(classe);
            elemento.addEventListener('animationend', () => {
                elemento.classList.remove(classe);
            }, { once: true });
        }

        // =====================================================
        // FUN√á√ïES DE ACESSO √ÄS CONFIGURA√á√ïES
        // =====================================================

        function verificarAcessoConfiguracoes() {
            if (acessoConfig) {
                // J√° tem acesso, vai direto para as configura√ß√µes
                showSection('configuracoes');
            } else {
                // Precisa fazer login
                showSection('loginConfiguracoes');
                document.getElementById('senhaConfiguracoes').focus();
            }
        }

        function verificarEnterConfig(event) {
            if (event.key === 'Enter') {
                validarSenhaConfiguracoes();
            }
        }

        function validarSenhaConfiguracoes() {
            const senha = document.getElementById('senhaConfiguracoes').value;
            
            if (!senha) {
                mostrarAlerta('‚ùå Digite a senha de configura√ß√£o!', 'danger');
                return;
            }

            if (senha === SENHA_CONFIGURACOES) {
                acessoConfig = true;
                document.getElementById('senhaConfiguracoes').value = '';
                
                // Mostrar status de acesso
                const statusDiv = document.getElementById('configStatus');
                statusDiv.innerHTML = `‚öôÔ∏è Acesso Autorizado √†s Configura√ß√µes - Administrador`;
                statusDiv.style.display = 'block';
                
                showSection('configuracoes');
                atualizarEstatisticasConfig();
                mostrarAlerta('‚úÖ Acesso √†s configura√ß√µes autorizado!', 'success');
            } else {
                mostrarAlerta('‚ùå Senha incorreta! Entre em contato com o administrador.', 'danger');
                document.getElementById('senhaConfiguracoes').value = '';
                document.getElementById('senhaConfiguracoes').focus();
            }
        }

        function logoutConfiguracoes() {
            if (confirm('üö™ Deseja realmente sair das configura√ß√µes?')) {
                acessoConfig = false;
                document.getElementById('configStatus').style.display = 'none';
                showSection('home');
                mostrarAlerta('üö™ Sa√≠da das configura√ß√µes realizada com sucesso!', 'info');
            }
        }

        function atualizarEstatisticasConfig() {
            const totalColabs = Object.keys(colaboradores).length;
            const totalGests = Object.keys(gestores).length;
            const ultimaImport = localStorage.getItem('ultima_importacao_gg') || 'Nunca';

            // Usar anima√ß√£o nos n√∫meros
            animarNumero('totalColaboradores', totalColabs);
            animarNumero('totalGestoresConfig', totalGests);
            
            document.getElementById('ultimaImportacao').textContent = ultimaImport;
            document.getElementById('statusSistema').textContent = 'Ativo';
        }

        function debugArquivo(tipo) {
            const inputId = tipo === 'colaboradores' ? 'arquivoColaboradores' : 'arquivoGestores';
            const arquivo = document.getElementById(inputId).files[0];
            
            if (!arquivo) {
                mostrarAlerta('‚ùå Selecione um arquivo primeiro!', 'danger');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const conteudo = e.target.result;
                
                // Criar modal com informa√ß√µes de debug
                const debugInfo = `
                    <h3>üîç Debug do Arquivo - ${tipo.toUpperCase()}</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>üìÅ Informa√ß√µes do Arquivo:</h4>
                        <p><strong>Nome:</strong> ${arquivo.name}</p>
                        <p><strong>Tamanho:</strong> ${arquivo.size} bytes</p>
                        <p><strong>Tipo:</strong> ${arquivo.type}</p>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>üìÑ Primeiras 5 linhas do arquivo:</h4>
                        <pre style="background: #fff; padding: 10px; border: 1px solid #ddd; border-radius: 4px; overflow-x: auto; font-family: monospace; font-size: 12px;">${conteudo.split('\n').slice(0, 5).join('\n')}</pre>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>üîç An√°lise de Separadores:</h4>
                        <p><strong>Cont√©m ponto e v√≠rgula (;):</strong> ${conteudo.includes(';') ? '‚úÖ Sim' : '‚ùå N√£o'}</p>
                        <p><strong>Cont√©m v√≠rgula (,):</strong> ${conteudo.includes(',') ? '‚úÖ Sim' : '‚ùå N√£o'}</p>
                        <p><strong>Total de linhas:</strong> ${conteudo.split('\n').length}</p>
                        <p><strong>Linhas n√£o vazias:</strong> ${conteudo.split('\n').filter(l => l.trim()).length}</p>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #ffc107;">
                        <h4>üí° Dicas:</h4>
                        <ul>
                            <li>Verifique se o arquivo usa ponto e v√≠rgula (;) como separador</li>
                            <li>Formato esperado: Matricula;Nome;Funcao;Filial;Regional</li>
                            <li>Certifique-se que n√£o h√° caracteres especiais no arquivo</li>
                            <li>O arquivo deve ter pelo menos 5 colunas por linha</li>
                        </ul>
                    </div>
                `;
                
                mostrarModal(debugInfo);
            };
            
            reader.readAsText(arquivo, 'UTF-8');
        }

        // =====================================================
        // FUN√á√ïES DE IMPORTA√á√ÉO DE DADOS (CONTINUA√á√ÉO)
        // =====================================================

        function importarColaboradores() {
            const arquivo = document.getElementById('arquivoColaboradores').files[0];
            if (!arquivo) {
                mostrarAlerta('‚ùå Selecione um arquivo primeiro!', 'danger');
                return;
            }

            mostrarLoading(true);
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    console.log('üìÑ Conte√∫do do arquivo:', e.target.result.substring(0, 200) + '...');
                    
                    let dados;
                    
                    if (arquivo.name.endsWith('.csv')) {
                        dados = processarCSV(e.target.result);
                        console.log('üìã Dados processados:', dados.slice(0, 3));
                    } else {
                        mostrarAlerta('‚ùå Formato n√£o suportado. Use apenas CSV por enquanto.', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    // Validar estrutura
                    if (!dados || dados.length === 0) {
                        mostrarAlerta('‚ùå Arquivo vazio ou formato inv√°lido!', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    console.log('üìä Total de linhas processadas:', dados.length);

                    // Processar dados
                    const novosColaboradores = {};
                    let processados = 0;
                    let erros = 0;

                    dados.forEach((linha, index) => {
                        console.log(`üìù Linha ${index + 1}:`, linha);
                        
                        if (linha.length >= 2) { // M√≠nimo: matr√≠cula e nome
                            const matricula = linha[0]?.toString().trim();
                            const nome = linha[1]?.toString().trim();
                            const funcao = linha[2]?.toString().trim() || '';
                            const filial = linha[3]?.toString().trim() || '';
                            const regional = linha[4]?.toString().trim() || '';

                            if (matricula && nome) {
                                novosColaboradores[matricula] = {
                                    nome: nome,
                                    funcao: funcao,
                                    filial: filial,
                                    regional: regional
                                };
                                processados++;
                                console.log(`‚úÖ Processado: ${matricula} - ${nome}`);
                            } else {
                                console.log(`‚ùå Erro linha ${index + 1}: matr√≠cula ou nome vazio`);
                                erros++;
                            }
                        } else {
                            console.log(`‚ùå Erro linha ${index + 1}: poucos campos (${linha.length})`);
                            erros++;
                        }
                    });

                    console.log('üìà Resultado:', { processados, erros, total: Object.keys(novosColaboradores).length });

                    if (processados === 0) {
                        mostrarAlerta('‚ùå Nenhum colaborador foi processado! Verifique o formato do arquivo.', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    // Salvar dados
                    colaboradores = { ...colaboradores, ...novosColaboradores };
                    localStorage.setItem('ultima_importacao_gg', new Date().toLocaleString('pt-BR'));

                    // Salvar todos os dados
                    const salvou = salvarTodosOsDados();
                    
                    if (!salvou) {
                        mostrarAlerta('‚ùå Erro ao salvar colaboradores importados!', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    // Mostrar preview
                    mostrarPreviewColaboradores(Object.entries(novosColaboradores).slice(0, 10));

                    mostrarLoading(false);
                    atualizarEstatisticasConfig();
                    mostrarAlerta(`‚úÖ Importa√ß√£o conclu√≠da! ${processados} colaboradores processados e salvos permanentemente. ${erros > 0 ? erros + ' erros encontrados.' : ''}`, 'success');
                    console.log('üíæ Colaboradores importados e salvos:', Object.keys(novosColaboradores).length);

                } catch (error) {
                    console.error('‚ùå Erro na importa√ß√£o:', error);
                    mostrarLoading(false);
                    mostrarAlerta('‚ùå Erro ao processar arquivo: ' + error.message, 'danger');
                }
            };

            reader.readAsText(arquivo, 'UTF-8');
        }

        function importarGestores() {
            const arquivo = document.getElementById('arquivoGestores').files[0];
            if (!arquivo) {
                mostrarAlerta('‚ùå Selecione um arquivo primeiro!', 'danger');
                return;
            }

            mostrarLoading(true);
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    console.log('üìÑ Conte√∫do do arquivo gestores:', e.target.result.substring(0, 200) + '...');
                    
                    let dados;
                    
                    if (arquivo.name.endsWith('.csv')) {
                        dados = processarCSV(e.target.result);
                        console.log('üìã Dados de gestores processados:', dados.slice(0, 3));
                    } else {
                        mostrarAlerta('‚ùå Formato n√£o suportado. Use apenas CSV por enquanto.', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    // Validar estrutura
                    if (!dados || dados.length === 0) {
                        mostrarAlerta('‚ùå Arquivo vazio ou formato inv√°lido!', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    console.log('üìä Total de linhas de gestores processadas:', dados.length);

                    // Processar dados
                    const novosGestores = {};
                    let processados = 0;
                    let erros = 0;

                    dados.forEach((linha, index) => {
                        console.log(`üìù Linha gestor ${index + 1}:`, linha);
                        
                        if (linha.length >= 2) { // M√≠nimo: matr√≠cula e nome
                            const matricula = linha[0]?.toString().trim();
                            const nome = linha[1]?.toString().trim();
                            const funcao = linha[2]?.toString().trim() || '';
                            const filial = linha[3]?.toString().trim() || '';
                            const regional = linha[4]?.toString().trim() || '';

                            if (matricula && nome) {
                                novosGestores[matricula] = {
                                    nome: nome,
                                    funcao: funcao,
                                    filial: filial,
                                    regional: regional
                                };
                                processados++;
                                console.log(`‚úÖ Gestor processado: ${matricula} - ${nome}`);
                            } else {
                                console.log(`‚ùå Erro linha gestor ${index + 1}: matr√≠cula ou nome vazio`);
                                erros++;
                            }
                        } else {
                            console.log(`‚ùå Erro linha gestor ${index + 1}: poucos campos (${linha.length})`);
                            erros++;
                        }
                    });

                    console.log('üìà Resultado gestores:', { processados, erros, total: Object.keys(novosGestores).length });

                    if (processados === 0) {
                        mostrarAlerta('‚ùå Nenhum gestor foi processado! Verifique o formato do arquivo.', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    // Salvar dados
                    gestores = { ...gestores, ...novosGestores };
                    localStorage.setItem('ultima_importacao_gg', new Date().toLocaleString('pt-BR'));

                    // Salvar todos os dados
                    const salvou = salvarTodosOsDados();
                    
                    if (!salvou) {
                        mostrarAlerta('‚ùå Erro ao salvar gestores importados!', 'danger');
                        mostrarLoading(false);
                        return;
                    }

                    // Mostrar preview
                    mostrarPreviewGestores(Object.entries(novosGestores).slice(0, 10));

                    mostrarLoading(false);
                    atualizarEstatisticasConfig();
                    mostrarAlerta(`‚úÖ Importa√ß√£o conclu√≠da! ${processados} gestores processados e salvos permanentemente. ${erros > 0 ? erros + ' erros encontrados.' : ''}`, 'success');
                    console.log('üíæ Gestores importados e salvos:', Object.keys(novosGestores).length);

                } catch (error) {
                    console.error('‚ùå Erro na importa√ß√£o de gestores:', error);
                    mostrarLoading(false);
                    mostrarAlerta('‚ùå Erro ao processar arquivo: ' + error.message, 'danger');
                }
            };

            reader.readAsText(arquivo, 'UTF-8');
        }

        function processarCSV(conteudo) {
            console.log('üîç Processando CSV...');
            console.log('üìÑ Primeiros 300 caracteres:', conteudo.substring(0, 300));
            
            const linhas = conteudo.split('\n');
            console.log(`üìä Total de linhas no arquivo: ${linhas.length}`);
            
            const dados = [];
            
            linhas.forEach((linha, index) => {
                if (linha.trim()) {
                    let campos;
                    
                    console.log(`üìù Linha ${index + 1} (original):`, linha);
                    
                    // Detectar se usa ponto e v√≠rgula ou v√≠rgula como separador
                    if (linha.includes(';')) {
                        console.log(`‚úÖ Detectado separador: ponto e v√≠rgula (;)`);
                        // Separar por ponto e v√≠rgula
                        campos = linha.split(';').map(campo => campo.trim().replace(/"/g, ''));
                    } else if (linha.includes(',')) {
                        console.log(`‚úÖ Detectado separador: v√≠rgula (,)`);
                        // Separar por v√≠rgula (formato padr√£o)
                        campos = linha.split(',').map(campo => campo.trim().replace(/"/g, ''));
                    } else {
                        console.log(`‚ùå Nenhum separador detectado na linha ${index + 1}`);
                        // Se n√£o tem separador, talvez seja uma linha com um campo √∫nico
                        campos = [linha.trim()];
                    }
                    
                    console.log(`üìã Campos extra√≠dos:`, campos);
                    dados.push(campos);
                }
            });

            console.log(`üìà Total de linhas processadas: ${dados.length}`);

            // Remover cabe√ßalho se existir
            if (dados.length > 0) {
                const primeiraLinha = dados[0];
                console.log(`üîç Primeira linha:`, primeiraLinha);
                
                // Verificar se √© cabe√ßalho (cont√©m palavras como "matricula", "nome", etc.)
                const textoLinha = primeiraLinha.join(' ').toLowerCase();
                console.log(`üîç Texto da primeira linha (lower):`, textoLinha);
                
                if (textoLinha.includes('matricula') || textoLinha.includes('nome') || textoLinha.includes('funcao')) {
                    console.log(`‚úÇÔ∏è Removendo cabe√ßalho detectado`);
                    dados.shift(); // Remove cabe√ßalho
                } else {
                    console.log(`‚úÖ Primeira linha n√£o √© cabe√ßalho, mantendo`);
                }
            }

            console.log(`üìä Dados finais para processamento: ${dados.length} linhas`);
            console.log(`üìã Primeiras 3 linhas:`, dados.slice(0, 3));

            return dados;
        }

        function mostrarPreviewColaboradores(dados) {
            const tbody = document.getElementById('previewColaboradoresBody');
            const preview = document.getElementById('previewColaboradores');
            
            let html = '';
            dados.forEach(([matricula, colaborador]) => {
                html += `<tr>
                    <td>${matricula}</td>
                    <td>${colaborador.nome}</td>
                    <td>${colaborador.funcao}</td>
                    <td>${colaborador.filial}</td>
                    <td>${colaborador.regional}</td>
                </tr>`;
            });

            tbody.innerHTML = html;
            preview.style.display = 'block';
        }

        function mostrarPreviewGestores(dados) {
            const tbody = document.getElementById('previewGestoresBody');
            const preview = document.getElementById('previewGestores');
            
            let html = '';
            dados.forEach(([matricula, gestor]) => {
                html += `<tr>
                    <td>${matricula}</td>
                    <td>${gestor.nome}</td>
                    <td>${gestor.funcao}</td>
                    <td>${gestor.filial}</td>
                    <td>${gestor.regional}</td>
                </tr>`;
            });

            tbody.innerHTML = html;
            preview.style.display = 'block';
        }

        function baixarModeloColaboradores() {
            const modelo = 'Matricula;Nome;Funcao;Filial;Regional\n12345;Jo√£o Silva;Analista;713;SP\n67890;Maria Santos;Coordenadora;743;MS';
            
            const blob = new Blob([modelo], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'modelo_colaboradores.csv';
            a.click();
            window.URL.revokeObjectURL(url);

            mostrarAlerta('üì• Modelo de colaboradores baixado!', 'info');
        }

        function baixarModeloGestores() {
            const modelo = 'Matricula;Nome;Funcao;Filial;Regional\nG001;Pedro Oliveira;Gerente;713;SP\nG002;Ana Costa;Supervisora;743;MS';
            
            const blob = new Blob([modelo], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'modelo_gestores.csv';
            a.click();
            window.URL.revokeObjectURL(url);

            mostrarAlerta('üì• Modelo de gestores baixado!', 'info');
        }

        function limparColaboradores() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os colaboradores cadastrados!\n\nDeseja continuar?')) {
                colaboradores = {};
                document.getElementById('previewColaboradores').style.display = 'none';
                document.getElementById('arquivoColaboradores').value = '';
                
                const salvou = salvarTodosOsDados();
                
                if (salvou) {
                    atualizarEstatisticasConfig();
                    mostrarAlerta('üóëÔ∏è Dados de colaboradores limpos e salvos!', 'warning');
                    console.log('üóëÔ∏è Colaboradores limpos do sistema');
                } else {
                    mostrarAlerta('‚ùå Erro ao limpar colaboradores!', 'danger');
                }
            }
        }

        function limparGestores() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os gestores cadastrados!\n\nDeseja continuar?')) {
                gestores = {};
                document.getElementById('previewGestores').style.display = 'none';
                document.getElementById('arquivoGestores').value = '';
                
                const salvou = salvarTodosOsDados();
                
                if (salvou) {
                    atualizarEstatisticasConfig();
                    mostrarAlerta('üóëÔ∏è Dados de gestores limpos e salvos!', 'warning');
                    console.log('üóëÔ∏è Gestores limpos do sistema');
                } else {
                    mostrarAlerta('‚ùå Erro ao limpar gestores!', 'danger');
                }
            }
        }

        function exportarBackupCompleto() {
            const backup = {
                data: new Date().toISOString(),
                versao: '2.0.0',
                avaliacoes: avaliacoes,
                colaboradores: colaboradores,
                gestores: gestores,
                totalRegistros: {
                    avaliacoes: avaliacoes.length,
                    colaboradores: Object.keys(colaboradores).length,
                    gestores: Object.keys(gestores).length
                }
            };

            const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'backup_completo_sistema_gg_' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            window.URL.revokeObjectURL(url);

            mostrarAlerta('üíæ Backup completo exportado com sucesso!', 'success');
        }

        function resetarSistema() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO CR√çTICA!\n\nEsta a√ß√£o ir√° APAGAR TODOS OS DADOS:\n‚Ä¢ Avalia√ß√µes\n‚Ä¢ Colaboradores\n‚Ä¢ Gestores\n\nEsta a√ß√£o N√ÉO PODE ser desfeita!\n\nTem CERTEZA ABSOLUTA?')) {
                if (confirm('üö® CONFIRMA√á√ÉO FINAL\n\nDigite "RESETAR" na pr√≥xima tela para confirmar.')) {
                    const confirmacao = prompt('Digite "RESETAR" para confirmar:');
                    if (confirmacao === 'RESETAR') {
                        // Limpar todos os dados do localStorage
                        localStorage.removeItem('avaliacoes_gg');
                        localStorage.removeItem('colaboradores_gg');
                        localStorage.removeItem('gestores_gg');
                        localStorage.removeItem('ultima_importacao_gg');
                        
                        // Resetar vari√°veis
                        avaliacoes = [];
                        colaboradores = {};
                        gestores = {};
                        acessoAtivo = null;
                        acessoConfig = false;
                        
                        // Resetar interface
                        document.getElementById('configStatus').style.display = 'none';
                        showSection('home');
                        atualizarEstatisticasHome();
                        
                        console.log('üîÑ Sistema completamente resetado - todos os dados removidos');
                        mostrarAlerta('üîÑ Sistema resetado completamente! Todos os dados foram removidos permanentemente.', 'warning');
                    } else {
                        mostrarAlerta('‚ùå Opera√ß√£o cancelada - confirma√ß√£o incorreta.', 'info');
                    }
                }
            }
        }

        // =====================================================
        // FUN√á√ïES DE BUSCA AUTOM√ÅTICA (AJUSTADA)
        // =====================================================

        function buscarColaboradorPorMatricula(matricula) {
            if (!matricula) return null;
            return colaboradores[matricula.toString().trim()] || null;
        }

        function buscarGestorPorMatricula(matricula) {
            if (!matricula) return null;
            return gestores[matricula.toString().trim()] || null;
        }

        function configurarBuscaAutomatica() {
            // Campo matr√≠cula do avaliado
            const campoMatriculaAvaliado = document.getElementById('matriculaAvaliado');
            if (campoMatriculaAvaliado) {
                campoMatriculaAvaliado.addEventListener('input', function() {
                    const matricula = this.value.trim();
                    if (matricula.length >= 3) { // Buscar com 3+ caracteres
                        const colaborador = buscarColaboradorPorMatricula(matricula);
                        if (colaborador) {
                            // Preencher TODOS os campos do colaborador
                            document.getElementById('nomeAvaliado').value = colaborador.nome || '';
                            document.getElementById('funcaoAvaliado').value = colaborador.funcao || '';
                            document.getElementById('filial').value = colaborador.filial || '';
                            document.getElementById('regional').value = colaborador.regional || '';
                            
                            // Feedback visual positivo
                            this.style.borderColor = 'var(--cor-secundaria)';
                            this.style.backgroundColor = 'rgba(143, 214, 148, 0.1)';
                            
                            // Log para debug
                            console.log('‚úÖ Colaborador encontrado:', colaborador);
                        } else {
                            // Limpar todos os campos se n√£o encontrar
                            document.getElementById('nomeAvaliado').value = '';
                            document.getElementById('funcaoAvaliado').value = '';
                            document.getElementById('filial').value = '';
                            document.getElementById('regional').value = '';
                            
                            // Feedback visual neutro
                            this.style.borderColor = '#e0e0e0';
                            this.style.backgroundColor = '';
                        }
                    } else {
                        // Limpar campos se matr√≠cula for muito curta
                        document.getElementById('nomeAvaliado').value = '';
                        document.getElementById('funcaoAvaliado').value = '';
                        document.getElementById('filial').value = '';
                        document.getElementById('regional').value = '';
                        
                        this.style.borderColor = '#e0e0e0';
                        this.style.backgroundColor = '';
                    }
                });
            }

            // Campo matr√≠cula do gestor
            const campoMatriculaGestor = document.getElementById('matriculaGestor');
            if (campoMatriculaGestor) {
                campoMatriculaGestor.addEventListener('input', function() {
                    const matricula = this.value.trim();
                    if (matricula.length >= 3) { // Buscar com 3+ caracteres
                        const gestor = buscarGestorPorMatricula(matricula);
                        if (gestor) {
                            // Preencher TODOS os campos do gestor
                            document.getElementById('nomeGestor').value = gestor.nome || '';
                            document.getElementById('funcaoGestor').value = gestor.funcao || '';
                            
                            // Feedback visual positivo
                            this.style.borderColor = 'var(--cor-secundaria)';
                            this.style.backgroundColor = 'rgba(143, 214, 148, 0.1)';
                            
                            // Log para debug
                            console.log('‚úÖ Gestor encontrado:', gestor);
                        } else {
                            // Limpar campos se n√£o encontrar
                            document.getElementById('nomeGestor').value = '';
                            document.getElementById('funcaoGestor').value = '';
                            
                            // Feedback visual neutro
                            this.style.borderColor = '#e0e0e0';
                            this.style.backgroundColor = '';
                        }
                    } else {
                        // Limpar campos se matr√≠cula for muito curta
                        document.getElementById('nomeGestor').value = '';
                        document.getElementById('funcaoGestor').value = '';
                        
                        this.style.borderColor = '#e0e0e0';
                        this.style.backgroundColor = '';
                    }
                });
            }
        }

        // =====================================================
        // FUN√á√ïES DE NAVEGA√á√ÉO E ACESSO (ATUALIZADA)
        // =====================================================

        function showSection(sectionId) {
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Remover classe ativa de todos os bot√µes
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Mostrar se√ß√£o selecionada
            document.getElementById(sectionId).classList.add('active');

            // Adicionar classe ativa ao bot√£o apropriado
            if (sectionId === 'historico' && acessoAtivo) {
                document.getElementById('btnHistorico').classList.add('active');
            } else if (sectionId === 'configuracoes' && acessoConfig) {
                document.getElementById('btnConfiguracoes').classList.add('active');
            } else if (sectionId !== 'loginHistorico' && sectionId !== 'loginConfiguracoes') {
                // Encontrar o bot√£o correto
                const botoes = document.querySelectorAll('.nav-btn');
                botoes.forEach(btn => {
                    if (btn.onclick && btn.onclick.toString().includes(sectionId)) {
                        btn.classList.add('active');
                    }
                });
            }

            // Atualizar dados espec√≠ficos da se√ß√£o
            switch(sectionId) {
                case 'home':
                    atualizarEstatisticasHome();
                    break;
                case 'avaliacao':
                    inicializarFormularioAvaliacao();
                    break;
                case 'historico':
                    if (acessoAtivo) {
                        atualizarHistorico();
                    }
                    break;
                case 'relatorios':
                    atualizarRelatorios();
                    break;
                case 'configuracoes':
                    if (acessoConfig) {
                        atualizarEstatisticasConfig();
                    }
                    break;
            }
        }

        function verificarAcessoHistorico() {
            if (acessoAtivo) {
                // J√° tem acesso, vai direto para o hist√≥rico
                showSection('historico');
            } else {
                // Precisa fazer login
                showSection('loginHistorico');
                document.getElementById('senhaAcesso').focus();
            }
        }

        function verificarEnter(event) {
            if (event.key === 'Enter') {
                validarSenhaHistorico();
            }
        }

        function validarSenhaHistorico() {
            const senha = document.getElementById('senhaAcesso').value.toUpperCase();
            
            if (!senha) {
                mostrarAlerta('‚ùå Digite uma senha!', 'danger');
                return;
            }

            if (SENHAS_ACESSO[senha]) {
                acessoAtivo = SENHAS_ACESSO[senha];
                document.getElementById('senhaAcesso').value = '';
                
                // Mostrar status de acesso
                const statusDiv = document.getElementById('accessStatus');
                statusDiv.innerHTML = `üîì Acesso Autorizado: ${acessoAtivo.nome}`;
                statusDiv.style.display = 'block';
                
                showSection('historico');
                mostrarAlerta('‚úÖ Acesso autorizado com sucesso!', 'success');
            } else {
                mostrarAlerta('‚ùå Senha incorreta! Verifique as senhas dispon√≠veis.', 'danger');
                document.getElementById('senhaAcesso').value = '';
                document.getElementById('senhaAcesso').focus();
            }
        }

        function logout() {
            if (confirm('üö™ Deseja realmente sair do hist√≥rico?')) {
                acessoAtivo = null;
                document.getElementById('accessStatus').style.display = 'none';
                showSection('home');
                mostrarAlerta('üö™ Sa√≠da realizada com sucesso!', 'info');
            }
        }

        function filtrarAvaliacoesPorAcesso(avaliacoesTodas = null) {
            const todasAvaliacoes = avaliacoesTodas || avaliacoes;
            
            if (!acessoAtivo || acessoAtivo.tipo === 'master') {
                return todasAvaliacoes;
            }
            
            // Filtrar por filiais permitidas
            return todasAvaliacoes.filter(av => acessoAtivo.filiais.includes(av.filial));
        }

        // =====================================================
        // FUN√á√ïES DO FORMUL√ÅRIO DE AVALIA√á√ÉO
        // =====================================================

        function inicializarFormularioAvaliacao() {
            criarFormularioCompetencias();
            atualizarProgresso();
            
            // Configurar busca autom√°tica ap√≥s o DOM estar pronto
            setTimeout(() => {
                configurarBuscaAutomatica();
            }, 100);
        }

        function criarFormularioCompetencias() {
            const container = document.getElementById('competenciasContainer');
            let html = '';
            let fatorIndex = 0;

            COMPETENCIAS.forEach((competencia, compIndex) => {
                html += '<div class="competencia-card">';
                html += '<div class="competencia-header">' + competencia.nome + '</div>';

                competencia.fatores.forEach((fator, index) => {
                    html += '<div class="fator-item">';
                    html += '<div class="fator-texto">' + fator + '</div>';
                    html += '<div class="rating-container">';
                    html += '<span class="rating-label">Inadequado</span>';
                    
                    for(let i = 1; i <= 5; i++) {
                        html += '<label class="rating-option">';
                        html += '<input type="radio" name="fator_' + fatorIndex + '" value="' + i + '" onchange="atualizarProgresso()">';
                        html += '<span>' + i + '</span>';
                        html += '</label>';
                    }
                    
                    html += '<span class="rating-label">Excelente</span>';
                    html += '</div>';
                    html += '</div>';
                    fatorIndex++;
                });

                html += '</div>';
            });

            container.innerHTML = html;
        }

        function atualizarRegional() {
            const filial = document.getElementById('filial').value;
            const regional = FILIAIS_REGIONAIS[filial] || '';
            document.getElementById('regional').value = regional;
        }

        function atualizarProgresso() {
            const totalFatores = 31;
            const fatoresAvaliados = document.querySelectorAll('input[type="radio"]:checked').length;
            const porcentagem = (fatoresAvaliados / totalFatores) * 100;
            
            document.getElementById('progressFill').style.width = porcentagem + '%';
            document.getElementById('progressText').textContent = fatoresAvaliados + ' de ' + totalFatores + ' fatores avaliados';
            
            return fatoresAvaliados;
        }

        function calcularResultado() {
            const fatoresAvaliados = atualizarProgresso();
            
            if (fatoresAvaliados === 0) {
                mostrarAlerta('‚ùå Avalie pelo menos um fator antes de calcular!', 'danger');
                return;
            }

            const radios = document.querySelectorAll('input[type="radio"]:checked');
            let somaNotas = 0;
            
            radios.forEach(radio => {
                somaNotas += parseInt(radio.value);
            });

            const pontuacao = fatoresAvaliados > 0 ? (somaNotas / fatoresAvaliados) : 0;
            let classificacao = '';
            
            if (pontuacao >= 4.5) {
                classificacao = 'EXCELENTE üåü';
            } else if (pontuacao >= 3.5) {
                classificacao = 'BOM üëç';
            } else if (pontuacao >= 2.5) {
                classificacao = 'REGULAR üìà';
            } else {
                classificacao = 'PRECISA MELHORAR üìö';
            }

            // Atualizar exibi√ß√£o do resultado
            document.getElementById('pontuacaoDisplay').textContent = pontuacao.toFixed(2) + '/5.00';
            document.getElementById('classificacaoDisplay').textContent = classificacao;

            // Gerar laudo resumo
            const laudoResumo = gerarLaudoResumo(pontuacao, classificacao);
            document.getElementById('laudoResumo').innerHTML = laudoResumo;

            // Mostrar card de resultado
            document.getElementById('resultadoCard').classList.add('show');

            // Habilitar bot√µes
            document.getElementById('btnSalvar').disabled = fatoresAvaliados < 15;
            document.getElementById('btnRelatorio').disabled = fatoresAvaliados < 15;

            // Salvar avalia√ß√£o atual
            avaliacaoAtual = {
                pontuacao: pontuacao,
                classificacao: classificacao.replace(/[üåüüëçüìàüìö]/g, '').trim(),
                fatoresAvaliados: fatoresAvaliados,
                respostas: coletarRespostas()
            };

            if (fatoresAvaliados < 15) {
                mostrarAlerta('‚ö†Ô∏è Avalie pelo menos 15 fatores para poder salvar a avalia√ß√£o completa.', 'warning');
            }
        }

        function coletarRespostas() {
            const respostas = {};
            const radios = document.querySelectorAll('input[type="radio"]:checked');
            
            radios.forEach(radio => {
                respostas[radio.name] = radio.value;
            });

            return respostas;
        }

        function gerarLaudoResumo(pontuacao, classificacao) {
            let resumo = '';
            
            if (pontuacao >= 4.5) {
                resumo = '<strong style="color: var(--cor-primaria);">üéØ EXCELENTE DESEMPENHO!</strong><br>';
                resumo += 'O(a) avaliado(a) demonstra compet√™ncias excepcionais em lideran√ßa. ';
                resumo += 'Recomenda-se aproveitar seu potencial em projetos estrat√©gicos e como mentor(a) de outros l√≠deres.';
            } else if (pontuacao >= 3.5) {
                resumo = '<strong style="color: var(--cor-primaria);">üëç BOM DESEMPENHO!</strong><br>';
                resumo += 'O(a) avaliado(a) apresenta desempenho s√≥lido com oportunidades espec√≠ficas de desenvolvimento. ';
                resumo += 'Com investimento direcionado, pode alcan√ßar n√≠vel de excel√™ncia.';
            } else if (pontuacao >= 2.5) {
                resumo = '<strong style="color: #ffc107;">üìà DESEMPENHO REGULAR</strong><br>';
                resumo += '√â necess√°rio um plano de desenvolvimento estruturado. ';
                resumo += 'Recomenda-se coaching individual e acompanhamento pr√≥ximo para evolu√ß√£o das compet√™ncias.';
            } else {
                resumo = '<strong style="color: #dc3545;">üìö PRECISA MELHORAR</strong><br>';
                resumo += 'Necess√°ria interven√ß√£o imediata com programa intensivo de desenvolvimento. ';
                resumo += 'O sucesso depende de comprometimento total e suporte organizacional.';
            }

            return resumo;
        }

        function salvarAvaliacao() {
            if (!avaliacaoAtual) {
                mostrarAlerta('‚ùå Calcule o resultado primeiro!', 'danger');
                return;
            }

            const nomeAvaliado = document.getElementById('nomeAvaliado').value;
            const nomeGestor = document.getElementById('nomeGestor').value;
            const filial = document.getElementById('filial').value;
            const funcaoAvaliado = document.getElementById('funcaoAvaliado').value;

            if (!nomeAvaliado || !nomeGestor || !filial || !funcaoAvaliado) {
                mostrarAlerta('‚ùå Preencha os campos obrigat√≥rios: Nome do Avaliado, Nome do Gestor, Filial e Fun√ß√£o!', 'danger');
                return;
            }

            const avaliacao = {
                id: 'AV' + Date.now(),
                data: new Date(),
                nomeAvaliado: nomeAvaliado,
                matricula: document.getElementById('matriculaAvaliado').value,
                funcaoAvaliado: funcaoAvaliado,
                nomeGestor: nomeGestor,
                matriculaGestor: document.getElementById('matriculaGestor').value,
                filial: filial,
                regional: document.getElementById('regional').value,
                pontuacao: avaliacaoAtual.pontuacao.toFixed(2),
                classificacao: avaliacaoAtual.classificacao,
                pontosFortes: document.getElementById('pontosFortes').value,
                oportunidades: document.getElementById('oportunidades').value,
                comentarios: document.getElementById('comentarios').value,
                respostas: avaliacaoAtual.respostas
            };

            avaliacoes.push(avaliacao);
            
            // Salvar no localStorage
            const salvou = salvarTodosOsDados();
            
            if (salvou) {
                mostrarAlerta('‚úÖ Avalia√ß√£o salva com sucesso! ID: ' + avaliacao.id, 'success');
                console.log('üíæ Avalia√ß√£o salva:', avaliacao);
                
                document.getElementById('btnSalvar').textContent = '‚úÖ Salvo!';
                setTimeout(() => {
                    document.getElementById('btnSalvar').textContent = 'üíæ Salvar Avalia√ß√£o';
                }, 2000);
            } else {
                mostrarAlerta('‚ùå Erro ao salvar avalia√ß√£o! Tente novamente.', 'danger');
            }
        }

        function limparFormulario() {
            if (confirm('üóëÔ∏è Deseja realmente limpar todos os dados do formul√°rio?')) {
                document.getElementById('nomeAvaliado').value = '';
                document.getElementById('matriculaAvaliado').value = '';
                document.getElementById('funcaoAvaliado').value = '';
                document.getElementById('nomeGestor').value = '';
                document.getElementById('matriculaGestor').value = '';
                document.getElementById('filial').value = '';
                document.getElementById('regional').value = '';
                document.getElementById('funcaoGestor').value = '';
                document.getElementById('pontosFortes').value = '';
                document.getElementById('oportunidades').value = '';
                document.getElementById('comentarios').value = '';

                document.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });

                document.getElementById('resultadoCard').classList.remove('show');
                document.getElementById('btnSalvar').disabled = true;
                document.getElementById('btnRelatorio').disabled = true;
                
                // Resetar estilos dos campos de matr√≠cula
                document.getElementById('matriculaAvaliado').style.borderColor = '#e0e0e0';
                document.getElementById('matriculaAvaliado').style.backgroundColor = '';
                document.getElementById('matriculaGestor').style.borderColor = '#e0e0e0';
                document.getElementById('matriculaGestor').style.backgroundColor = '';
                
                atualizarProgresso();
                avaliacaoAtual = null;

                mostrarAlerta('üóëÔ∏è Formul√°rio limpo com sucesso!', 'info');
            }
        }

        // =====================================================
        // FUN√á√ïES DE HIST√ìRICO
        // =====================================================

        function atualizarHistorico() {
            atualizarEstatisticasHistorico();
            atualizarTabelaHistorico();
        }

        function atualizarEstatisticasHistorico() {
            const avaliacoesFiltradas = filtrarAvaliacoesPorAcesso();
            const total = avaliacoesFiltradas.length;
            let somaNotas = 0;
            let excelentes = 0;
            let precisamMelhorar = 0;

            avaliacoesFiltradas.forEach(av => {
                const nota = parseFloat(av.pontuacao);
                somaNotas += nota;
                
                if (av.classificacao === 'EXCELENTE') excelentes++;
                if (av.classificacao === 'PRECISA MELHORAR') precisamMelhorar++;
            });

            const media = total > 0 ? (somaNotas / total).toFixed(2) : '0.00';

            // Usar anima√ß√£o nos n√∫meros
            animarNumero('totalAvaliacoes', total);
            animarNumero('mediaGeral', parseFloat(media));
            animarNumero('excelentes', excelentes);
            animarNumero('precisamMelhorar', precisamMelhorar);
        }

        function atualizarTabelaHistorico(dados = null) {
            const tbody = document.getElementById('historicoTableBody');
            const avaliacoesFiltradas = dados || filtrarAvaliacoesPorAcesso();
            
            if (avaliacoesFiltradas.length === 0) {
                tbody.innerHTML = '<tr><td colspan="10" style="text-align: center; padding: 30px;">üì≠ Nenhuma avalia√ß√£o encontrada para este acesso</td></tr>';
                return;
            }

            let html = '';
            avaliacoesFiltradas.forEach(av => {
                const data = new Date(av.data).toLocaleDateString('pt-BR');
                const classeClass = obterClasseClassificacao(av.classificacao);
                const evolucao = calcularEvolucaoColaborador(av.nomeAvaliado, av.id, av.data);
                
                html += '<tr>';
                html += '<td>' + data + '</td>';
                html += '<td>' + av.nomeAvaliado + '</td>';
                html += '<td>' + (av.funcaoAvaliado || '-') + '</td>';
                html += '<td>' + (av.matricula || '-') + '</td>';
                html += '<td>' + av.nomeGestor + '</td>';
                html += '<td>' + av.filial + ' - ' + av.regional + '</td>';
                html += '<td><strong>' + av.pontuacao + '</strong></td>';
                html += '<td><span class="badge badge-' + classeClass + '">' + av.classificacao + '</span></td>';
                html += '<td>' + evolucao.texto + '</td>';
                html += '<td>';
                html += '<button class="btn btn-sm btn-info" onclick="verDetalhes(\'' + av.id + '\')">üëÅÔ∏è Ver</button> ';
                html += '<button class="btn btn-sm btn-warning" onclick="gerarRelatorioIndividual(\'' + av.id + '\')">üìÑ PDF</button> ';
                html += '<button class="btn btn-sm btn-danger" onclick="excluirAvaliacao(\'' + av.id + '\')">üóëÔ∏è</button>';
                html += '</td>';
                html += '</tr>';
            });

            tbody.innerHTML = html;
        }

        function calcularEvolucaoColaborador(nomeAvaliado, avaliacaoId, dataAvaliacao) {
            // Buscar todas as avalia√ß√µes do colaborador ordenadas por data (mais antiga primeiro)
            const avaliacoesColaborador = avaliacoes
                .filter(av => av.nomeAvaliado.toLowerCase() === nomeAvaliado.toLowerCase())
                .sort((a, b) => new Date(a.data) - new Date(b.data));

            // Encontrar a posi√ß√£o da avalia√ß√£o atual
            const indiceAtual = avaliacoesColaborador.findIndex(av => av.id === avaliacaoId);
            
            // Se √© a primeira avalia√ß√£o do colaborador
            if (indiceAtual === 0 || indiceAtual === -1) {
                const numeroAvaliacao = indiceAtual + 1;
                return {
                    status: 'PRIMEIRA',
                    texto: `<div class="evolucao-primeira" style="text-align: center; font-size: 11px;">
                            <span style="color: #666;">üÜï <strong>PRIMEIRA</strong><br>
                            <small>1¬™ Avalia√ß√£o</small></span>
                            </div>`
                };
            }

            // Pegar a avalia√ß√£o atual e a anterior
            const avaliacaoAtual = avaliacoesColaborador[indiceAtual];
            const avaliacaoAnterior = avaliacoesColaborador[indiceAtual - 1];

            const notaAtual = parseFloat(avaliacaoAtual.pontuacao);
            const notaAnterior = parseFloat(avaliacaoAnterior.pontuacao);
            
            const diferenca = notaAtual - notaAnterior;
            const percentual = Math.abs((diferenca / notaAnterior) * 100);
            
            // Calcular qual avalia√ß√£o √© esta na sequ√™ncia
            const numeroAvaliacao = indiceAtual + 1;
            const numeroAvaliacaoAnterior = indiceAtual;

            let status, classe, icone, texto;

            if (diferenca > 0.1) {
                status = 'MELHORIA';
                classe = 'evolucao-melhoria';
                icone = 'üìà';
                texto = `<div class="${classe}" style="text-align: center; font-size: 11px;">
                        ${icone} <strong style="color: #28a745;">MELHOROU</strong><br>
                        <small>${numeroAvaliacaoAnterior}¬™‚Üí${numeroAvaliacao}¬™: ${notaAnterior.toFixed(2)}‚Üí${notaAtual.toFixed(2)}</small><br>
                        <small style="color: #28a745; font-weight: bold;">+${percentual.toFixed(1)}%</small>
                        </div>`;
            } else if (diferenca < -0.1) {
                status = 'REGRESSAO';
                classe = 'evolucao-regressao';
                icone = 'üìâ';
                texto = `<div class="${classe}" style="text-align: center; font-size: 11px;">
                        ${icone} <strong style="color: #dc3545;">PIOROU</strong><br>
                        <small>${numeroAvaliacaoAnterior}¬™‚Üí${numeroAvaliacao}¬™: ${notaAnterior.toFixed(2)}‚Üí${notaAtual.toFixed(2)}</small><br>
                        <small style="color: #dc3545; font-weight: bold;">-${percentual.toFixed(1)}%</small>
                        </div>`;
            } else {
                status = 'ESTAVEL';
                classe = 'evolucao-estavel';
                icone = '‚û°Ô∏è';
                texto = `<div class="${classe}" style="text-align: center; font-size: 11px;">
                        ${icone} <strong style="color: #6c757d;">EST√ÅVEL</strong><br>
                        <small>${numeroAvaliacaoAnterior}¬™‚Üí${numeroAvaliacao}¬™: ${notaAnterior.toFixed(2)}‚Üí${notaAtual.toFixed(2)}</small><br>
                        <small style="color: #6c757d; font-weight: bold;">¬±${percentual.toFixed(1)}%</small>
                        </div>`;
            }

            return {
                status: status,
                texto: texto,
                numeroAvaliacao: numeroAvaliacao,
                evolucaoDetalhada: {
                    de: notaAnterior,
                    para: notaAtual,
                    diferenca: diferenca,
                    percentual: percentual
                }
            };
        }

        function obterClasseClassificacao(classificacao) {
            switch(classificacao.toUpperCase()) {
                case 'EXCELENTE': return 'success';
                case 'BOM': return 'primary';
                case 'REGULAR': return 'warning';
                case 'PRECISA MELHORAR': return 'danger';
                default: return 'secondary';
            }
        }

        function aplicarFiltros() {
            const filtroNome = document.getElementById('filtroNome').value.toLowerCase();
            const filtroGestor = document.getElementById('filtroGestor').value.toLowerCase();
            const filtroClassificacao = document.getElementById('filtroClassificacao').value;
            const filtroDataInicio = document.getElementById('filtroDataInicio').value;
            const filtroDataFim = document.getElementById('filtroDataFim').value;

            const avaliacoesFiltradas = filtrarAvaliacoesPorAcesso().filter(av => {
                // Filtro por nome
                if (filtroNome && !av.nomeAvaliado.toLowerCase().includes(filtroNome)) return false;
                
                // Filtro por gestor
                if (filtroGestor && !av.nomeGestor.toLowerCase().includes(filtroGestor)) return false;
                
                // Filtro por classifica√ß√£o
                if (filtroClassificacao && av.classificacao !== filtroClassificacao) return false;
                
                // Filtro por data
                const dataAvaliacao = new Date(av.data);
                if (filtroDataInicio) {
                    const dataInicio = new Date(filtroDataInicio);
                    if (dataAvaliacao < dataInicio) return false;
                }
                if (filtroDataFim) {
                    const dataFim = new Date(filtroDataFim);
                    dataFim.setHours(23, 59, 59, 999);
                    if (dataAvaliacao > dataFim) return false;
                }
                
                return true;
            });

            atualizarTabelaHistorico(avaliacoesFiltradas);
            mostrarAlerta('üîç Filtros aplicados! ' + avaliacoesFiltradas.length + ' avalia√ß√µes encontradas.', 'info');
        }

        function limparFiltros() {
            document.getElementById('filtroNome').value = '';
            document.getElementById('filtroGestor').value = '';
            document.getElementById('filtroClassificacao').value = '';
            document.getElementById('filtroDataInicio').value = '';
            document.getElementById('filtroDataFim').value = '';
            
            atualizarTabelaHistorico();
            mostrarAlerta('üóëÔ∏è Filtros limpos!', 'info');
        }

        function verDetalhes(id) {
            const avaliacao = avaliacoes.find(av => av.id === id);
            if (!avaliacao) return;

            // Verificar se tem acesso a esta avalia√ß√£o
            const avaliacoesFiltradas = filtrarAvaliacoesPorAcesso();
            if (!avaliacoesFiltradas.find(av => av.id === id)) {
                mostrarAlerta('‚ùå Acesso negado para esta avalia√ß√£o!', 'danger');
                return;
            }

            const conteudo = 
                '<h3>üìã Detalhes da Avalia√ß√£o</h3>' +
                '<p><strong>ID:</strong> ' + avaliacao.id + '</p>' +
                '<p><strong>Data:</strong> ' + new Date(avaliacao.data).toLocaleString('pt-BR') + '</p>' +
                '<p><strong>Avaliado:</strong> ' + avaliacao.nomeAvaliado + '</p>' +
                '<p><strong>Matr√≠cula:</strong> ' + (avaliacao.matricula || 'N√£o informada') + '</p>' +
                '<p><strong>Fun√ß√£o:</strong> ' + (avaliacao.funcaoAvaliado || 'N√£o informada') + '</p>' +
                '<p><strong>Gestor:</strong> ' + avaliacao.nomeGestor + '</p>' +
                '<p><strong>Matr√≠cula Gestor:</strong> ' + (avaliacao.matriculaGestor || 'N√£o informada') + '</p>' +
                '<p><strong>Filial:</strong> ' + avaliacao.filial + ' - ' + avaliacao.regional + '</p>' +
                '<p><strong>Pontua√ß√£o:</strong> ' + avaliacao.pontuacao + '/5.00</p>' +
                '<p><strong>Classifica√ß√£o:</strong> ' + avaliacao.classificacao + '</p>' +
                (avaliacao.pontosFortes ? '<p><strong>Pontos Fortes:</strong> ' + avaliacao.pontosFortes + '</p>' : '') +
                (avaliacao.oportunidades ? '<p><strong>Oportunidades:</strong> ' + avaliacao.oportunidades + '</p>' : '') +
                (avaliacao.comentarios ? '<p><strong>Coment√°rios:</strong> ' + avaliacao.comentarios + '</p>' : '');

            mostrarModal(conteudo);
        }

        function excluirAvaliacao(id) {
            // Verificar se tem acesso a esta avalia√ß√£o
            const avaliacoesFiltradas = filtrarAvaliacoesPorAcesso();
            if (!avaliacoesFiltradas.find(av => av.id === id)) {
                mostrarAlerta('‚ùå Acesso negado para excluir esta avalia√ß√£o!', 'danger');
                return;
            }

            if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Esta a√ß√£o n√£o pode ser desfeita.\n\nDeseja realmente excluir esta avalia√ß√£o?')) {
                avaliacoes = avaliacoes.filter(av => av.id !== id);
                
                const salvou = salvarTodosOsDados();
                
                if (salvou) {
                    atualizarHistorico();
                    mostrarAlerta('‚úÖ Avalia√ß√£o exclu√≠da e dados salvos com sucesso!', 'success');
                    console.log('üóëÔ∏è Avalia√ß√£o exclu√≠da:', id);
                } else {
                    mostrarAlerta('‚ùå Erro ao salvar ap√≥s exclus√£o!', 'danger');
                }
            }
        }

        // =====================================================
        // FUN√á√ïES DE RELAT√ìRIOS
        // =====================================================

        function atualizarRelatorios() {
            atualizarEstatisticasRelatorios();
            gerarAnaliseCompetencias();
            gerarAnaliseFiliais();
            gerarAnaliseFuncoes();
        }

        function aplicarFiltrosRelatorio() {
            // Os filtros s√£o aplicados automaticamente quando as fun√ß√µes de an√°lise s√£o chamadas
            atualizarEstatisticasRelatorios();
            gerarAnaliseCompetencias();
            gerarAnaliseFiliais();
            gerarAnaliseFuncoes();
        }

        function limparFiltrosRelatorio() {
            document.getElementById('filtroRelatorioFilial').value = '';
            aplicarFiltrosRelatorio();
            mostrarAlerta('üóëÔ∏è Filtros de relat√≥rio limpos!', 'info');
        }

        function obterAvaliacoesFiltradas() {
            const filtroFilial = document.getElementById('filtroRelatorioFilial')?.value || '';
            
            return avaliacoes.filter(av => {
                if (filtroFilial && av.filial !== filtroFilial) return false;
                return true;
            });
        }

        function atualizarEstatisticasRelatorios() {
            const avaliacoesParaAnalise = obterAvaliacoesFiltradas();
            const total = avaliacoesParaAnalise.length;
            let somaNotas = 0;
            let gestoresUnicos = new Set();
            let colaboradoresMelhorando = 0;

            // Calcular colaboradores que est√£o melhorando
            const colaboradoresUnicos = [...new Set(avaliacoesParaAnalise.map(av => av.nomeAvaliado))];
            
            colaboradoresUnicos.forEach(nome => {
                // Para relat√≥rios, vamos contar quantas vezes o colaborador melhorou
                const avaliacoesColaborador = avaliacoes
                    .filter(av => av.nomeAvaliado.toLowerCase() === nome.toLowerCase())
                    .sort((a, b) => new Date(a.data) - new Date(b.data));
                
                let melhorias = 0;
                for (let i = 1; i < avaliacoesColaborador.length; i++) {
                    const atual = parseFloat(avaliacoesColaborador[i].pontuacao);
                    const anterior = parseFloat(avaliacoesColaborador[i-1].pontuacao);
                    if (atual > anterior + 0.1) {
                        melhorias++;
                    }
                }
                
                if (melhorias > 0) {
                    colaboradoresMelhorando++;
                }
            });

            avaliacoesParaAnalise.forEach(av => {
                somaNotas += parseFloat(av.pontuacao);
                gestoresUnicos.add(av.nomeGestor);
            });

            const media = total > 0 ? (somaNotas / total).toFixed(2) : '0.00';

            // Usar anima√ß√£o nos n√∫meros
            animarNumero('totalAvaliacoesRel', total);
            animarNumero('mediaGeralRel', parseFloat(media));
            animarNumero('colaboradoresMelhorando', colaboradoresMelhorando);
            animarNumero('totalGestores', gestoresUnicos.size);
        }

        function gerarAnaliseCompetencias() {
            const container = document.getElementById('analiseCompetencias');
            
            if (avaliacoes.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">üìä Execute algumas avalia√ß√µes para ver a an√°lise</p>';
                return;
            }

            let html = '<div class="table-container">';
            html += '<table class="data-table">';
            html += '<thead><tr><th>Compet√™ncia</th><th>M√©dia</th><th>Status</th></tr></thead>';
            html += '<tbody>';

            COMPETENCIAS.forEach(comp => {
                const mediaComp = (Math.random() * 2 + 3).toFixed(2); // Simula√ß√£o
                let status = '';
                let cor = '';

                if (mediaComp >= 4.5) {
                    status = 'Excelente';
                    cor = 'var(--cor-secundaria)';
                } else if (mediaComp >= 3.5) {
                    status = 'Bom';
                    cor = 'var(--cor-primaria)';
                } else if (mediaComp >= 2.5) {
                    status = 'Regular';
                    cor = '#ffc107';
                } else {
                    status = 'Precisa Melhorar';
                    cor = '#dc3545';
                }

                html += '<tr>';
                html += '<td>' + comp.nome + '</td>';
                html += '<td><strong>' + mediaComp + '/5.00</strong></td>';
                html += '<td><span style="color: ' + cor + '; font-weight: bold;">' + status + '</span></td>';
                html += '</tr>';
            });

            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        function gerarAnaliseFiliais() {
            const container = document.getElementById('analiseFiliais');
            const avaliacoesParaAnalise = obterAvaliacoesFiltradas();
            
            if (avaliacoesParaAnalise.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">üìä Nenhuma avalia√ß√£o encontrada com os filtros aplicados</p>';
                return;
            }

            // Agrupar por filial
            const dadosPorFilial = {};
            avaliacoesParaAnalise.forEach(av => {
                if (!dadosPorFilial[av.filial]) {
                    dadosPorFilial[av.filial] = {
                        count: 0,
                        soma: 0,
                        regional: av.regional
                    };
                }
                dadosPorFilial[av.filial].count++;
                dadosPorFilial[av.filial].soma += parseFloat(av.pontuacao);
            });

            let html = '<div class="table-container">';
            html += '<table class="data-table">';
            html += '<thead><tr><th>Filial</th><th>Regional</th><th>Avalia√ß√µes</th><th>M√©dia</th></tr></thead>';
            html += '<tbody>';

            Object.keys(dadosPorFilial).forEach(filial => {
                const dados = dadosPorFilial[filial];
                const media = (dados.soma / dados.count).toFixed(2);

                html += '<tr>';
                html += '<td>' + filial + '</td>';
                html += '<td>' + dados.regional + '</td>';
                html += '<td>' + dados.count + '</td>';
                html += '<td><strong>' + media + '/5.00</strong></td>';
                html += '</tr>';
            });

            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        function gerarAnaliseFuncoes() {
            const container = document.getElementById('analiseFuncoes');
            const avaliacoesParaAnalise = obterAvaliacoesFiltradas();
            
            if (avaliacoesParaAnalise.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">üìä Nenhuma avalia√ß√£o encontrada com os filtros aplicados</p>';
                return;
            }

            // Agrupar por fun√ß√£o
            const dadosPorFuncao = {};
            avaliacoesParaAnalise.forEach(av => {
                const funcao = av.funcaoAvaliado || 'N√£o informada';
                if (!dadosPorFuncao[funcao]) {
                    dadosPorFuncao[funcao] = {
                        count: 0,
                        soma: 0,
                        excelentes: 0,
                        bons: 0,
                        regulares: 0,
                        precisamMelhorar: 0
                    };
                }
                dadosPorFuncao[funcao].count++;
                dadosPorFuncao[funcao].soma += parseFloat(av.pontuacao);
                
                // Contar por classifica√ß√£o
                switch(av.classificacao) {
                    case 'EXCELENTE': dadosPorFuncao[funcao].excelentes++; break;
                    case 'BOM': dadosPorFuncao[funcao].bons++; break;
                    case 'REGULAR': dadosPorFuncao[funcao].regulares++; break;
                    case 'PRECISA MELHORAR': dadosPorFuncao[funcao].precisamMelhorar++; break;
                }
            });

            let html = '<div class="table-container">';
            html += '<table class="data-table">';
            html += '<thead><tr><th>Fun√ß√£o</th><th>Avalia√ß√µes</th><th>M√©dia</th><th>Excelentes</th><th>Bons</th><th>Regulares</th><th>Precisam Melhorar</th></tr></thead>';
            html += '<tbody>';

            // Ordenar por quantidade de avalia√ß√µes (maior primeiro)
            const funcoesOrdenadas = Object.keys(dadosPorFuncao).sort((a, b) => dadosPorFuncao[b].count - dadosPorFuncao[a].count);

            funcoesOrdenadas.forEach(funcao => {
                const dados = dadosPorFuncao[funcao];
                const media = (dados.soma / dados.count).toFixed(2);

                html += '<tr>';
                html += '<td><strong>' + funcao + '</strong></td>';
                html += '<td>' + dados.count + '</td>';
                html += '<td><strong>' + media + '/5.00</strong></td>';
                html += '<td><span class="badge badge-success">' + dados.excelentes + '</span></td>';
                html += '<td><span class="badge badge-primary">' + dados.bons + '</span></td>';
                html += '<td><span class="badge badge-warning">' + dados.regulares + '</span></td>';
                html += '<td><span class="badge badge-danger">' + dados.precisamMelhorar + '</span></td>';
                html += '</tr>';
            });

            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        function gerarRelatorioCompleto() {
            mostrarLoading(true);
            
            setTimeout(() => {
                mostrarLoading(false);
                
                const relatorioHTML = criarRelatorioHTML();
                
                const novaJanela = window.open('', '_blank');
                novaJanela.document.write(relatorioHTML);
                novaJanela.document.close();
                
                mostrarAlerta('üìÑ Relat√≥rio completo gerado com sucesso!', 'success');
            }, 1500);
        }

        function exportarDados() {
            if (avaliacoes.length === 0) {
                mostrarAlerta('‚ùå Nenhuma avalia√ß√£o para exportar!', 'danger');
                return;
            }

            let csv = 'Data,Avaliado,Matricula,Funcao,Gestor,MatriculaGestor,Filial,Regional,Pontuacao,Classificacao\n';
            
            avaliacoes.forEach(av => {
                const linha = [
                    new Date(av.data).toLocaleDateString('pt-BR'),
                    av.nomeAvaliado,
                    av.matricula || '',
                    av.funcaoAvaliado || '',
                    av.nomeGestor,
                    av.matriculaGestor || '',
                    av.filial,
                    av.regional,
                    av.pontuacao,
                    av.classificacao
                ].join(',');
                csv += linha + '\n';
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'avaliacoes_gg_' + new Date().toISOString().split('T')[0] + '.csv';
            a.click();
            window.URL.revokeObjectURL(url);

            mostrarAlerta('üì• Dados exportados com sucesso!', 'success');
        }

        function criarRelatorioHTML() {
            const agora = new Date().toLocaleString('pt-BR');
            const total = avaliacoes.length;
            const media = total > 0 ? (avaliacoes.reduce((acc, av) => acc + parseFloat(av.pontuacao), 0) / total).toFixed(2) : '0.00';

            return `
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Relat√≥rio Completo - Sistema de Avalia√ß√£o de Desempenho</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            color: #504B43;
        }
        .header { 
            text-align: center; 
            margin-bottom: 30px; 
            background: linear-gradient(135deg, #8FD694 0%, #77AD78 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
        }
        .stats { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 20px; 
            margin: 20px 0; 
        }
        .stat-card { 
            background: #F8FAF9; 
            padding: 15px; 
            border-radius: 8px; 
            text-align: center;
            border: 2px solid #8FD694;
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 20px 0; 
        }
        th, td { 
            padding: 10px; 
            border: 1px solid #ddd; 
            text-align: left; 
        }
        th { 
            background: #1e441e; 
            color: white; 
        }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ RELAT√ìRIO COMPLETO - SISTEMA DE AVALIA√á√ÉO DE DESEMPENHO</h1>
        <p>Relat√≥rio gerado em: ${agora}</p>
    </div>

    <div class="stats">
        <div class="stat-card">
            <h3>${total}</h3>
            <p>Total de Avalia√ß√µes</p>
        </div>
        <div class="stat-card">
            <h3>${media}</h3>
            <p>M√©dia Geral</p>
        </div>
        <div class="stat-card">
            <h3>${avaliacoes.filter(av => av.classificacao === 'EXCELENTE').length}</h3>
            <p>Excelentes</p>
        </div>
        <div class="stat-card">
            <h3>${new Set(avaliacoes.map(av => av.nomeGestor)).size}</h3>
            <p>Gestores √önicos</p>
        </div>
    </div>

    <h2>üìã Hist√≥rico Completo de Avalia√ß√µes</h2>
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Avaliado</th>
                <th>Gestor</th>
                <th>Filial</th>
                <th>Pontua√ß√£o</th>
                <th>Classifica√ß√£o</th>
            </tr>
        </thead>
        <tbody>
            ${avaliacoes.map(av => `
                <tr>
                    <td>${new Date(av.data).toLocaleDateString('pt-BR')}</td>
                    <td>${av.nomeAvaliado}</td>
                    <td>${av.nomeGestor}</td>
                    <td>${av.filial} - ${av.regional}</td>
                    <td>${av.pontuacao}/5.00</td>
                    <td>${av.classificacao}</td>
                </tr>
            `).join('')}
        </tbody>
    </table>

    <div class="no-print" style="text-align: center; margin: 30px 0;">
        <button onclick="window.print()" style="padding: 10px 20px; background: #1e441e; color: white; border: none; border-radius: 5px; cursor: pointer;">üñ®Ô∏è Imprimir</button>
        <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">‚ùå Fechar</button>
    </div>
</body>
</html>
            `;
        }

        function gerarRelatorioIndividual(id) {
            const avaliacao = avaliacoes.find(av => av.id === id);
            if (!avaliacao) return;

            // Verificar se tem acesso a esta avalia√ß√£o
            const avaliacoesFiltradas = filtrarAvaliacoesPorAcesso();
            if (!avaliacoesFiltradas.find(av => av.id === id)) {
                mostrarAlerta('‚ùå Acesso negado para gerar relat√≥rio desta avalia√ß√£o!', 'danger');
                return;
            }

            mostrarLoading(true);
            
            setTimeout(() => {
                mostrarLoading(false);
                
                const relatorioHTML = criarRelatorioIndividualHTML(avaliacao);
                
                const novaJanela = window.open('', '_blank');
                novaJanela.document.write(relatorioHTML);
                novaJanela.document.close();
                
                mostrarAlerta('üìÑ Relat√≥rio individual gerado com sucesso!', 'success');
            }, 1500);
        }

        function criarRelatorioIndividualHTML(avaliacao) {
            const agora = new Date().toLocaleString('pt-BR');
            
            return `
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Relat√≥rio Individual - ${avaliacao.nomeAvaliado}</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            line-height: 1.6; 
            color: #504B43;
        }
        .header { 
            text-align: center; 
            margin-bottom: 30px; 
            padding: 20px; 
            background: linear-gradient(135deg, #8FD694 0%, #77AD78 100%); 
            border-radius: 10px;
            color: white;
        }
        .info-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #8FD694; 
            border-radius: 8px; 
            background: #F8FAF9;
        }
        .resultado { 
            text-align: center; 
            padding: 20px; 
            background: linear-gradient(135deg, #8FD694 0%, #1e441e 100%); 
            border-radius: 10px; 
            margin: 20px 0;
            color: white;
        }
        .competencia { 
            margin: 15px 0; 
            padding: 10px; 
            background: #F8FAF9; 
            border-radius: 5px; 
            border-left: 4px solid #1e441e;
        }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ RELAT√ìRIO DE AVALIA√á√ÉO INDIVIDUAL</h1>
        <h2>${avaliacao.nomeAvaliado}</h2>
        <p>Relat√≥rio gerado em: ${agora}</p>
    </div>

    <div class="info-section">
        <h3>üìã Dados da Avalia√ß√£o</h3>
        <p><strong>Nome:</strong> ${avaliacao.nomeAvaliado}</p>
        <p><strong>Matr√≠cula:</strong> ${avaliacao.matricula || 'N√£o informada'}</p>
        <p><strong>Fun√ß√£o:</strong> ${avaliacao.funcaoAvaliado || 'N√£o informada'}</p>
        <p><strong>Gestor:</strong> ${avaliacao.nomeGestor || 'N√£o informado'}</p>
        <p><strong>Matr√≠cula do Gestor:</strong> ${avaliacao.matriculaGestor || 'N√£o informada'}</p>
        <p><strong>Filial:</strong> ${avaliacao.filial || 'N√£o informada'} - ${avaliacao.regional || 'N√£o informada'}</p>
        <p><strong>Data da Avalia√ß√£o:</strong> ${new Date(avaliacao.data).toLocaleDateString('pt-BR')}</p>
    </div>

    <div class="resultado">
        <h3>üìä RESULTADO DA AVALIA√á√ÉO</h3>
        <h2>PONTUA√á√ÉO: ${avaliacao.pontuacao}/5.00</h2>
        <h2>CLASSIFICA√á√ÉO: ${avaliacao.classificacao}</h2>
    </div>

    <div class="info-section">
        <h3>üéØ An√°lise por Compet√™ncias</h3>
        ${COMPETENCIAS.map(comp => `
            <div class="competencia">
                <h4>${comp.nome}</h4>
                <ul>
                    ${comp.fatores.map(fator => `<li>${fator}</li>`).join('')}
                </ul>
            </div>
        `).join('')}
    </div>

    ${avaliacao.pontosFortes ? `
    <div class="info-section">
        <h3>üí™ Pontos Fortes</h3>
        <p>${avaliacao.pontosFortes}</p>
    </div>
    ` : ''}

    ${avaliacao.oportunidades ? `
    <div class="info-section">
        <h3>üìà Oportunidades de Desenvolvimento</h3>
        <p>${avaliacao.oportunidades}</p>
    </div>
    ` : ''}

    ${avaliacao.comentarios ? `
    <div class="info-section">
        <h3>üí¨ Coment√°rios Gerais</h3>
        <p>${avaliacao.comentarios}</p>
    </div>
    ` : ''}

    <div class="info-section">
        <h3>üìã Recomenda√ß√µes de Desenvolvimento</h3>
        <p>Com base na pontua√ß√£o obtida (${avaliacao.pontuacao}/5.00), recomendamos:</p>
        ${gerarRecomendacoes(parseFloat(avaliacao.pontuacao || 0))}
    </div>

    <div style="margin-top: 50px; border-top: 2px solid #1e441e; padding-top: 20px;">
        <div style="display: flex; justify-content: space-between;">
            <div style="text-align: center;">
                <p>_________________________</p>
                <p><strong>${avaliacao.nomeGestor || 'Gestor'}</strong></p>
                <p>Gestor Respons√°vel</p>
            </div>
            <div style="text-align: center;">
                <p>_________________________</p>
                <p><strong>${avaliacao.nomeAvaliado}</strong></p>
                <p>Avaliado</p>
            </div>
        </div>
    </div>

    <div class="no-print" style="text-align: center; margin: 30px 0;">
        <button onclick="window.print()" style="padding: 10px 20px; background: #1e441e; color: white; border: none; border-radius: 5px; cursor: pointer;">üñ®Ô∏è Imprimir</button>
        <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">‚ùå Fechar</button>
    </div>
</body>
</html>
            `;
        }

        function gerarRecomendacoes(pontuacao) {
            if (pontuacao >= 4.5) {
                return `
                    <ul>
                        <li><strong>Mantenha a excel√™ncia:</strong> Continue aplicando as melhores pr√°ticas identificadas</li>
                        <li><strong>Mentoria:</strong> Compartilhe conhecimentos com outros l√≠deres</li>
                        <li><strong>Projetos estrat√©gicos:</strong> Lidere iniciativas de alta complexidade</li>
                        <li><strong>Desenvolvimento de outros:</strong> Torne-se um multiplicador de talentos</li>
                    </ul>
                `;
            } else if (pontuacao >= 3.5) {
                return `
                    <ul>
                        <li><strong>Refinamento:</strong> Identifique compet√™ncias espec√≠ficas para aprimoramento</li>
                        <li><strong>Feedback 360¬∞:</strong> Busque retorno de diferentes stakeholders</li>
                        <li><strong>Capacita√ß√£o cont√≠nua:</strong> Participe de programas de desenvolvimento</li>
                        <li><strong>Networking:</strong> Amplie sua rede de relacionamentos profissionais</li>
                    </ul>
                `;
            } else if (pontuacao >= 2.5) {
                return `
                    <ul>
                        <li><strong>Plano estruturado:</strong> Desenvolva um PDI (Plano de Desenvolvimento Individual)</li>
                        <li><strong>Coaching:</strong> Considere acompanhamento profissional especializado</li>
                        <li><strong>Treinamentos espec√≠ficos:</strong> Foque nas compet√™ncias com menores pontua√ß√µes</li>
                        <li><strong>Acompanhamento mensal:</strong> Estabele√ßa metas de curto prazo</li>
                    </ul>
                `;
            } else {
                return `
                    <ul>
                        <li><strong>Interven√ß√£o imediata:</strong> Programa intensivo de desenvolvimento</li>
                        <li><strong>Mentoria direta:</strong> Acompanhamento semanal com l√≠der s√™nior</li>
                        <li><strong>Capacita√ß√£o urgente:</strong> Treinamentos nas compet√™ncias cr√≠ticas</li>
                        <li><strong>Reavalia√ß√£o em 90 dias:</strong> Acompanhamento de evolu√ß√£o</li>
                    </ul>
                `;
            }
        }

        function gerarRelatorio() {
            if (!avaliacaoAtual) {
                mostrarAlerta('‚ùå Calcule o resultado primeiro!', 'danger');
                return;
            }

            mostrarLoading(true);
            
            setTimeout(() => {
                mostrarLoading(false);
                
                const avaliacao = {
                    nomeAvaliado: document.getElementById('nomeAvaliado').value,
                    matricula: document.getElementById('matriculaAvaliado').value,
                    funcaoAvaliado: document.getElementById('funcaoAvaliado').value,
                    nomeGestor: document.getElementById('nomeGestor').value,
                    matriculaGestor: document.getElementById('matriculaGestor').value,
                    filial: document.getElementById('filial').value,
                    regional: document.getElementById('regional').value,
                    pontuacao: avaliacaoAtual.pontuacao.toFixed(2),
                    classificacao: avaliacaoAtual.classificacao,
                    pontosFortes: document.getElementById('pontosFortes').value,
                    oportunidades: document.getElementById('oportunidades').value,
                    comentarios: document.getElementById('comentarios').value,
                    data: new Date()
                };
                
                const relatorioHTML = criarRelatorioIndividualHTML(avaliacao);
                
                const novaJanela = window.open('', '_blank');
                novaJanela.document.write(relatorioHTML);
                novaJanela.document.close();
                
                mostrarAlerta('üìÑ Relat√≥rio individual gerado com sucesso!', 'success');
            }, 1500);
        }

        // =====================================================
        // FUN√á√ïES AUXILIARES
        // =====================================================

        function atualizarEstatisticasHome() {
            const total = avaliacoes.length;
            let somaNotas = 0;
            let excelentes = 0;
            let filiaisAtivas = new Set();

            avaliacoes.forEach(av => {
                somaNotas += parseFloat(av.pontuacao);
                if (av.classificacao === 'EXCELENTE') excelentes++;
                filiaisAtivas.add(av.filial);
            });

            const media = total > 0 ? (somaNotas / total).toFixed(2) : '0.00';

            // Usar anima√ß√£o nos n√∫meros
            animarNumero('totalAvaliacoesHome', total);
            animarNumero('mediaGeralHome', parseFloat(media));
            animarNumero('excelentesHome', excelentes);
            animarNumero('filiaisAtivasHome', filiaisAtivas.size);
        }

        function mostrarAlerta(mensagem, tipo) {
            // Remover alertas existentes
            const alertasExistentes = document.querySelectorAll('.alert');
            alertasExistentes.forEach(alerta => alerta.remove());

            // Criar novo alerta
            const alerta = document.createElement('div');
            alerta.className = 'alert alert-' + tipo;
            alerta.innerHTML = mensagem;

            // Inserir no in√≠cio da se√ß√£o ativa
            const secaoAtiva = document.querySelector('.section.active');
            secaoAtiva.insertBefore(alerta, secaoAtiva.firstChild);

            // Remover ap√≥s 5 segundos
            setTimeout(() => {
                if (alerta.parentNode) {
                    alerta.remove();
                }
            }, 5000);
        }

        function mostrarModal(conteudo) {
            document.getElementById('conteudoModal').innerHTML = conteudo;
            document.getElementById('modalDetalhes').style.display = 'block';
        }

        function fecharModal() {
            document.getElementById('modalDetalhes').style.display = 'none';
        }

        function mostrarLoading(mostrar) {
            const loading = document.getElementById('loading');
            if (loading) {
                loading.style.display = mostrar ? 'block' : 'none';
            }
        }

        // =====================================================
        // INICIALIZA√á√ÉO DO SISTEMA (ATUALIZADA PARA ONLINE)
        // =====================================================

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîÑ Iniciando sistema com sincroniza√ß√£o online...');
            
            // Carregar dados salvos do localStorage
            carregarDadosSalvos();
            
            // Inicializar sistema online
            setTimeout(async () => {
                await inicializarSistemaOnline();
                atualizarInterfaceOnline();
                adicionarLogSync('üöÄ Sistema iniciado');
            }, 1000);
            
            // Inicializar estat√≠sticas
            atualizarEstatisticasHome();
            
            // Configurar busca autom√°tica nos campos de matr√≠cula
            configurarBuscaAutomatica();

            console.log('üéØ Sistema inicializado com sincroniza√ß√£o online!');
            console.log(`üìä Dados carregados: ${avaliacoes.length} avalia√ß√µes, ${Object.keys(colaboradores).length} colaboradores, ${Object.keys(gestores).length} gestores`);
        });

        function carregarDadosSalvos() {
            console.log('üìÇ Carregando dados do localStorage...');
            
            // Carregar configura√ß√£o online
            configOnline.empresaId = localStorage.getItem('empresa_id_gg') || '';
            configOnline.ultimaSync = localStorage.getItem('ultima_sync_gg') || null;
            
            // Carregar avalia√ß√µes
            const avaliacoesSalvas = localStorage.getItem('avaliacoes_gg');
            if (avaliacoesSalvas) {
                try {
                    avaliacoes = JSON.parse(avaliacoesSalvas);
                    console.log(`‚úÖ ${avaliacoes.length} avalia√ß√µes carregadas do localStorage`);
                } catch (error) {
                    console.error('‚ùå Erro ao carregar avalia√ß√µes:', error);
                    avaliacoes = [];
                }
            } else {
                console.log('‚ÑπÔ∏è Nenhuma avalia√ß√£o salva encontrada');
                avaliacoes = [];
            }

            // Carregar colaboradores
            const colaboradoresSalvos = localStorage.getItem('colaboradores_gg');
            if (colaboradoresSalvos) {
                try {
                    colaboradores = JSON.parse(colaboradoresSalvos);
                    console.log(`‚úÖ ${Object.keys(colaboradores).length} colaboradores carregados do localStorage`);
                } catch (error) {
                    console.error('‚ùå Erro ao carregar colaboradores:', error);
                    colaboradores = {};
                }
            } else {
                console.log('‚ÑπÔ∏è Nenhum colaborador salvo encontrado');
                colaboradores = {};
            }

            // Carregar gestores
            const gestoresSalvos = localStorage.getItem('gestores_gg');
            if (gestoresSalvos) {
                try {
                    gestores = JSON.parse(gestoresSalvos);
                    console.log(`‚úÖ ${Object.keys(gestores).length} gestores carregados do localStorage`);
                } catch (error) {
                    console.error('‚ùå Erro ao carregar gestores:', error);
                    gestores = {};
                }
            } else {
                console.log('‚ÑπÔ∏è Nenhum gestor salvo encontrado');
                gestores = {};
            }

            // Verificar se √© a primeira vez usando o sistema (nenhum dado existe)
            const primeiraVez = avaliacoes.length === 0 && 
                               Object.keys(colaboradores).length === 0 && 
                               Object.keys(gestores).length === 0;

            if (primeiraVez) {
                console.log('üÜï Primeira vez usando o sistema - criando dados de exemplo');
                criarDadosExemplo();
            } else {
                console.log('üìã Dados existentes encontrados - mantendo dados salvos');
            }
        }

        // =====================================================
        // FUN√á√ÉO ORIGINAL DE SALVAMENTO
        // =====================================================

        function salvarTodosOsDadosBase() {
            try {
                localStorage.setItem('avaliacoes_gg', JSON.stringify(avaliacoes));
                localStorage.setItem('colaboradores_gg', JSON.stringify(colaboradores));
                localStorage.setItem('gestores_gg', JSON.stringify(gestores));
                localStorage.setItem('ultima_modificacao_gg', new Date().toISOString());
                console.log('üíæ Todos os dados salvos com sucesso');
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao salvar dados:', error);
                return false;
            }
        }

        // =====================================================
        // FUN√á√ÉO DE SALVAMENTO COM SINCRONIZA√á√ÉO ONLINE
        // =====================================================

        function salvarTodosOsDados() {
            // Salvar localmente primeiro
            const resultado = salvarTodosOsDadosBase();
            
            // Adicionar log se a fun√ß√£o estiver dispon√≠vel
            if (resultado && typeof adicionarLogSync === 'function') {
                adicionarLogSync('üíæ Dados salvos localmente');
            }
            
            // Sincronizar online se dispon√≠vel
            if (resultado && configOnline.ativo && navigator.onLine && !statusConexao.sincronizando) {
                if (typeof adicionarLogSync === 'function') {
                    adicionarLogSync('üîÑ Iniciando sincroniza√ß√£o autom√°tica...');
                }
                setTimeout(() => {
                    sincronizarDados();
                }, 1000);
            }
            
            return resultado;
        }

        function criarDadosExemplo() {
            console.log('üÜï Criando dados de exemplo para primeira inicializa√ß√£o...');
            
            // Criar colaboradores de exemplo
            const colaboradoresExemplo = {
                '12345': { nome: 'Jo√£o Silva', funcao: 'COORD. DE LOGISTICA', filial: '713', regional: 'SP' },
                '67890': { nome: 'Ana Costa', funcao: 'GERENTE DE OPERACOES', filial: '264', regional: 'SC' },
                '11111': { nome: 'Carlos Mendes', funcao: 'ANALISTA DE LOGISTICA', filial: '743', regional: 'MS' },
                '22222': { nome: 'Luciana Rocha', funcao: 'SUPERVISOR(A) DE LOGISTICA I', filial: '753', regional: 'MT' },
                '33333': { nome: 'Eduardo Santos', funcao: 'GERENTE REGIONAL DE OPERACOES', filial: '364', regional: 'DF' },
                '44444': { nome: 'Mariana Ferreira', funcao: 'ANALISTA FINANCEIRO', filial: '713', regional: 'SP' }
            };

            const gestoresExemplo = {
                'G001': { nome: 'Maria Santos', funcao: 'GERENTE GERAL', filial: '713', regional: 'SP' },
                'G002': { nome: 'Pedro Oliveira', funcao: 'GERENTE REGIONAL', filial: '264', regional: 'SC' },
                'G003': { nome: 'Fernanda Lima', funcao: 'SUPERVISORA GERAL', filial: '743', regional: 'MS' },
                'G004': { nome: 'Roberto Silva', funcao: 'GERENTE DE FILIAL', filial: '753', regional: 'MT' },
                'G005': { nome: 'Patr√≠cia Costa', funcao: 'DIRETORA REGIONAL', filial: '364', regional: 'DF' },
                'G006': { nome: 'Jos√© Santos', funcao: 'GERENTE FINANCEIRO', filial: '713', regional: 'SP' }
            };

            // Atribuir aos dados globais
            colaboradores = colaboradoresExemplo;
            gestores = gestoresExemplo;

            // Criar avalia√ß√µes com evolu√ß√£o sequencial clara
            const exemplos = [
                // Jo√£o Silva - Evolu√ß√£o de melhoria consistente (1¬™, 2¬™, 3¬™, 4¬™ avalia√ß√£o)
                {
                    id: 'AV' + Date.now() + '001',
                    data: new Date(Date.now() - 120 * 24 * 60 * 60 * 1000), // 120 dias atr√°s - 1¬™ avalia√ß√£o
                    nomeAvaliado: 'Jo√£o Silva',
                    matricula: '12345',
                    funcaoAvaliado: 'COORD. DE LOGISTICA',
                    nomeGestor: 'Maria Santos',
                    matriculaGestor: 'G001',
                    filial: '713',
                    regional: 'SP',
                    pontuacao: '2.8',
                    classificacao: 'REGULAR',
                    pontosFortes: 'Pontualidade e comprometimento.',
                    oportunidades: 'Desenvolver lideran√ßa e comunica√ß√£o.',
                    comentarios: '1¬™ Avalia√ß√£o - In√≠cio do desenvolvimento.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '002',
                    data: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000), // 90 dias atr√°s - 2¬™ avalia√ß√£o
                    nomeAvaliado: 'Jo√£o Silva',
                    matricula: '12345',
                    funcaoAvaliado: 'COORD. DE LOGISTICA',
                    nomeGestor: 'Maria Santos',
                    matriculaGestor: 'G001',
                    filial: '713',
                    regional: 'SP',
                    pontuacao: '3.4',
                    classificacao: 'REGULAR',
                    pontosFortes: 'Melhoria na comunica√ß√£o e organiza√ß√£o.',
                    oportunidades: 'Continuar desenvolvimento em lideran√ßa.',
                    comentarios: '2¬™ Avalia√ß√£o - Evolu√ß√£o positiva vis√≠vel.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '003',
                    data: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000), // 60 dias atr√°s - 3¬™ avalia√ß√£o
                    nomeAvaliado: 'Jo√£o Silva',
                    matricula: '12345',
                    funcaoAvaliado: 'COORD. DE LOGISTICA',
                    nomeGestor: 'Maria Santos',
                    matriculaGestor: 'G001',
                    filial: '713',
                    regional: 'SP',
                    pontuacao: '4.1',
                    classificacao: 'BOM',
                    pontosFortes: 'Lideran√ßa emergente e boa comunica√ß√£o.',
                    oportunidades: 'Refinar habilidades estrat√©gicas.',
                    comentarios: '3¬™ Avalia√ß√£o - Progresso significativo.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '004',
                    data: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // 30 dias atr√°s - 4¬™ avalia√ß√£o
                    nomeAvaliado: 'Jo√£o Silva',
                    matricula: '12345',
                    funcaoAvaliado: 'COORD. DE LOGISTICA',
                    nomeGestor: 'Maria Santos',
                    matriculaGestor: 'G001',
                    filial: '713',
                    regional: 'SP',
                    pontuacao: '4.6',
                    classificacao: 'EXCELENTE',
                    pontosFortes: 'Lideran√ßa consolidada e vis√£o estrat√©gica.',
                    oportunidades: 'Mentoria de outros colaboradores.',
                    comentarios: '4¬™ Avalia√ß√£o - Excel√™ncia alcan√ßada.',
                    respostas: {}
                },

                // Ana Costa - Evolu√ß√£o com uma regress√£o no meio (1¬™, 2¬™, 3¬™ avalia√ß√£o)
                {
                    id: 'AV' + Date.now() + '005',
                    data: new Date(Date.now() - 80 * 24 * 60 * 60 * 1000), // 80 dias atr√°s - 1¬™ avalia√ß√£o
                    nomeAvaliado: 'Ana Costa',
                    matricula: '67890',
                    funcaoAvaliado: 'GERENTE DE OPERACOES',
                    nomeGestor: 'Pedro Oliveira',
                    matriculaGestor: 'G002',
                    filial: '264',
                    regional: 'SC',
                    pontuacao: '4.2',
                    classificacao: 'BOM',
                    pontosFortes: 'Excelente gest√£o operacional.',
                    oportunidades: 'Desenvolver aspectos estrat√©gicos.',
                    comentarios: '1¬™ Avalia√ß√£o - Performance s√≥lida.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '006',
                    data: new Date(Date.now() - 50 * 24 * 60 * 60 * 1000), // 50 dias atr√°s - 2¬™ avalia√ß√£o
                    nomeAvaliado: 'Ana Costa',
                    matricula: '67890',
                    funcaoAvaliado: 'GERENTE DE OPERACOES',
                    nomeGestor: 'Pedro Oliveira',
                    matriculaGestor: 'G002',
                    filial: '264',
                    regional: 'SC',
                    pontuacao: '3.8',
                    classificacao: 'BOM',
                    pontosFortes: 'Mant√©m boa gest√£o operacional.',
                    oportunidades: 'Recuperar foco e motiva√ß√£o.',
                    comentarios: '2¬™ Avalia√ß√£o - Pequena queda, per√≠odo desafiador.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '007',
                    data: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000), // 20 dias atr√°s - 3¬™ avalia√ß√£o
                    nomeAvaliado: 'Ana Costa',
                    matricula: '67890',
                    funcaoAvaliado: 'GERENTE DE OPERACOES',
                    nomeGestor: 'Pedro Oliveira',
                    matriculaGestor: 'G002',
                    filial: '264',
                    regional: 'SC',
                    pontuacao: '4.7',
                    classificacao: 'EXCELENTE',
                    pontosFortes: 'Recupera√ß√£o excelente, lideran√ßa inspiradora.',
                    oportunidades: 'Continuar na trajet√≥ria de excel√™ncia.',
                    comentarios: '3¬™ Avalia√ß√£o - Recupera√ß√£o excepcional.',
                    respostas: {}
                },

                // Carlos Mendes - Oscila√ß√£o (melhora, piora, melhora)
                {
                    id: 'AV' + Date.now() + '008',
                    data: new Date(Date.now() - 70 * 24 * 60 * 60 * 1000), // 70 dias atr√°s - 1¬™ avalia√ß√£o
                    nomeAvaliado: 'Carlos Mendes',
                    matricula: '11111',
                    funcaoAvaliado: 'ANALISTA DE LOGISTICA',
                    nomeGestor: 'Fernanda Lima',
                    matriculaGestor: 'G003',
                    filial: '743',
                    regional: 'MS',
                    pontuacao: '3.2',
                    classificacao: 'REGULAR',
                    pontosFortes: 'Conhecimento t√©cnico s√≥lido.',
                    oportunidades: 'Desenvolver soft skills.',
                    comentarios: '1¬™ Avalia√ß√£o - Base t√©cnica boa.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '009',
                    data: new Date(Date.now() - 40 * 24 * 60 * 60 * 1000), // 40 dias atr√°s - 2¬™ avalia√ß√£o
                    nomeAvaliado: 'Carlos Mendes',
                    matricula: '11111',
                    funcaoAvaliado: 'ANALISTA DE LOGISTICA',
                    nomeGestor: 'Fernanda Lima',
                    matriculaGestor: 'G003',
                    filial: '743',
                    regional: 'MS',
                    pontuacao: '3.9',
                    classificacao: 'BOM',
                    pontosFortes: 'Melhoria em comunica√ß√£o e relacionamento.',
                    oportunidades: 'Manter consist√™ncia no desempenho.',
                    comentarios: '2¬™ Avalia√ß√£o - Evolu√ß√£o positiva.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '010',
                    data: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000), // 10 dias atr√°s - 3¬™ avalia√ß√£o
                    nomeAvaliado: 'Carlos Mendes',
                    matricula: '11111',
                    funcaoAvaliado: 'ANALISTA DE LOGISTICA',
                    nomeGestor: 'Fernanda Lima',
                    matriculaGestor: 'G003',
                    filial: '743',
                    regional: 'MS',
                    pontuacao: '3.5',
                    classificacao: 'BOM',
                    pontosFortes: 'Conhecimento t√©cnico mantido.',
                    oportunidades: 'Recuperar momentum de desenvolvimento.',
                    comentarios: '3¬™ Avalia√ß√£o - Leve retrocesso, aten√ß√£o necess√°ria.',
                    respostas: {}
                },

                // Luciana Rocha - Primeira avalia√ß√£o (para mostrar "PRIMEIRA")
                {
                    id: 'AV' + Date.now() + '011',
                    data: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000), // 5 dias atr√°s - 1¬™ avalia√ß√£o
                    nomeAvaliado: 'Luciana Rocha',
                    matricula: '22222',
                    funcaoAvaliado: 'SUPERVISOR(A) DE LOGISTICA I',
                    nomeGestor: 'Roberto Silva',
                    matriculaGestor: 'G004',
                    filial: '753',
                    regional: 'MT',
                    pontuacao: '3.6',
                    classificacao: 'BOM',
                    pontosFortes: 'Boa adapta√ß√£o e aprendizado r√°pido.',
                    oportunidades: 'Desenvolver lideran√ßa progressivamente.',
                    comentarios: 'Primeira avalia√ß√£o - Bom in√≠cio.',
                    respostas: {}
                },

                // Eduardo Santos - Estabilidade (para mostrar "EST√ÅVEL")
                {
                    id: 'AV' + Date.now() + '012',
                    data: new Date(Date.now() - 35 * 24 * 60 * 60 * 1000), // 35 dias atr√°s - 1¬™ avalia√ß√£o
                    nomeAvaliado: 'Eduardo Santos',
                    matricula: '33333',
                    funcaoAvaliado: 'GERENTE REGIONAL DE OPERACOES',
                    nomeGestor: 'Patr√≠cia Costa',
                    matriculaGestor: 'G005',
                    filial: '364',
                    regional: 'DF',
                    pontuacao: '4.8',
                    classificacao: 'EXCELENTE',
                    pontosFortes: 'Lideran√ßa excepcional consolidada.',
                    oportunidades: 'Manter o n√≠vel de excel√™ncia.',
                    comentarios: '1¬™ Avalia√ß√£o - Padr√£o de excel√™ncia.',
                    respostas: {}
                },
                {
                    id: 'AV' + Date.now() + '013',
                    data: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), // 7 dias atr√°s - 2¬™ avalia√ß√£o
                    nomeAvaliado: 'Eduardo Santos',
                    matricula: '33333',
                    funcaoAvaliado: 'GERENTE REGIONAL DE OPERACOES',
                    nomeGestor: 'Patr√≠cia Costa',
                    matriculaGestor: 'G005',
                    filial: '364',
                    regional: 'DF',
                    pontuacao: '4.9',
                    classificacao: 'EXCELENTE',
                    pontosFortes: 'Consist√™ncia na excel√™ncia.',
                    oportunidades: 'Continuar como refer√™ncia.',
                    comentarios: '2¬™ Avalia√ß√£o - Mant√©m padr√£o de excel√™ncia.',
                    respostas: {}
                }
            ];

            avaliacoes = exemplos;
            
            // Salvar dados de exemplo no localStorage
            const salvou = salvarTodosOsDados();
            localStorage.setItem('ultima_importacao_gg', new Date().toLocaleString('pt-BR'));
            
            if (salvou) {
                console.log('‚úÖ Dados de exemplo criados e salvos:', {
                    avaliacoes: avaliacoes.length,
                    colaboradores: Object.keys(colaboradores).length,
                    gestores: Object.keys(gestores).length
                });
            } else {
                console.error('‚ùå Erro ao salvar dados de exemplo');
            }
        }

        // =====================================================
        // EVENTOS E ATALHOS DE TECLADO
        // =====================================================

        // Fechar modal com clique fora
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('modalDetalhes');
            if (e.target === modal) {
                fecharModal();
            }
        });

        document.addEventListener('keydown', function(e) {
            // Ctrl + S para salvar avalia√ß√£o
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                const secaoAtiva = document.querySelector('.section.active');
                if (secaoAtiva && secaoAtiva.id === 'avaliacao') {
                    if (!document.getElementById('btnSalvar').disabled) {
                        salvarAvaliacao();
                    }
                }
            }
            
            // Ctrl + N para nova avalia√ß√£o
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                showSection('avaliacao');
            }
            
            // Ctrl + H para hist√≥rico
            if (e.ctrlKey && e.key === 'h') {
                e.preventDefault();
                verificarAcessoHistorico();
            }
            
            // Escape para fechar modal
            if (e.key === 'Escape') {
                fecharModal();
            }

            // F1 para home
            if (e.key === 'F1') {
                e.preventDefault();
                showSection('home');
            }

            // F2 para relat√≥rios
            if (e.key === 'F2') {
                e.preventDefault();
                showSection('relatorios');
            }
        });

        // =====================================================
        // CONSOLE DE COMANDOS AVAN√áADOS
        // =====================================================

        // Comandos dispon√≠veis via console do navegador
        window.sistemaGG = {
            info: () => {
                const info = {
                    versao: '2.0.0 - Sincroniza√ß√£o Online',
                    totalAvaliacoes: avaliacoes.length,
                    totalColaboradores: Object.keys(colaboradores).length,
                    totalGestores: Object.keys(gestores).length,
                    filiaisComDados: [...new Set(avaliacoes.map(av => av.filial))],
                    gestoresUnicos: [...new Set(avaliacoes.map(av => av.nomeGestor))],
                    ultimaAvaliacao: avaliacoes.length > 0 ? avaliacoes[avaliacoes.length - 1].data : null,
                    mediaGeral: avaliacoes.length > 0 ? (avaliacoes.reduce((acc, av) => acc + parseFloat(av.pontuacao), 0) / avaliacoes.length).toFixed(2) : '0.00',
                    distribuicaoClassificacao: {
                        excelente: avaliacoes.filter(av => av.classificacao === 'EXCELENTE').length,
                        bom: avaliacoes.filter(av => av.classificacao === 'BOM').length,
                        regular: avaliacoes.filter(av => av.classificacao === 'REGULAR').length,
                        precisaMelhorar: avaliacoes.filter(av => av.classificacao === 'PRECISA MELHORAR').length
                    },
                    sincronizacaoOnline: {
                        empresaId: configOnline.empresaId || 'N√£o configurada',
                        ativo: configOnline.ativo,
                        ultimaSync: configOnline.ultimaSync || 'Nunca',
                        online: statusConexao.online,
                        sincronizando: statusConexao.sincronizando
                    },
                    persistencia: {
                        localStorageDisponivel: typeof(Storage) !== "undefined",
                        dadosSalvos: {
                            avaliacoes: !!localStorage.getItem('avaliacoes_gg'),
                            colaboradores: !!localStorage.getItem('colaboradores_gg'),
                            gestores: !!localStorage.getItem('gestores_gg')
                        }
                    }
                };
                console.table(info);
                return info;
            },
            backup: () => {
                const backup = {
                    data: new Date().toISOString(),
                    versao: '2.0.0',
                    avaliacoes: avaliacoes,
                    colaboradores: colaboradores,
                    gestores: gestores,
                    configOnline: configOnline,
                    totalRegistros: {
                        avaliacoes: avaliacoes.length,
                        colaboradores: Object.keys(colaboradores).length,
                        gestores: Object.keys(gestores).length
                    }
                };
                const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'backup_sistema_gg_online_' + new Date().toISOString().split('T')[0] + '.json';
                a.click();
                window.URL.revokeObjectURL(url);
                mostrarAlerta('üíæ Backup com configura√ß√µes online exportado!', 'success');
            },
            testarPersistencia: () => {
                console.log('üß™ Testando persist√™ncia de dados...');
                
                const dadosOriginais = {
                    avaliacoes: avaliacoes.length,
                    colaboradores: Object.keys(colaboradores).length,
                    gestores: Object.keys(gestores).length
                };
                
                console.log('üìä Dados atuais na mem√≥ria:', dadosOriginais);
                
                // Verificar localStorage
                const dadosStorage = {
                    avaliacoes: JSON.parse(localStorage.getItem('avaliacoes_gg') || '[]').length,
                    colaboradores: Object.keys(JSON.parse(localStorage.getItem('colaboradores_gg') || '{}')).length,
                    gestores: Object.keys(JSON.parse(localStorage.getItem('gestores_gg') || '{}')).length
                };
                
                console.log('üíæ Dados salvos no localStorage:', dadosStorage);
                
                const persistenciaOK = 
                    dadosOriginais.avaliacoes === dadosStorage.avaliacoes &&
                    dadosOriginais.colaboradores === dadosStorage.colaboradores &&
                    dadosOriginais.gestores === dadosStorage.gestores;
                
                if (persistenciaOK) {
                    console.log('‚úÖ PERSIST√äNCIA OK - Dados sincronizados!');
                    mostrarAlerta('‚úÖ Teste de persist√™ncia: SUCESSO! Dados est√£o salvos corretamente.', 'success');
                } else {
                    console.log('‚ùå PROBLEMA DE PERSIST√äNCIA - Dados n√£o sincronizados!');
                    console.log('üîß Tentando sincronizar...');
                    salvarTodosOsDados();
                    mostrarAlerta('‚ö†Ô∏è Teste de persist√™ncia: Dados foram sincronizados.', 'warning');
                }
                
                return { dadosOriginais, dadosStorage, persistenciaOK };
            },
            // Fun√ß√µes espec√≠ficas da sincroniza√ß√£o online
            configurarEmpresa: (id) => {
                if (id) {
                    configOnline.empresaId = id.toUpperCase();
                    localStorage.setItem('empresa_id_gg', configOnline.empresaId);
                    console.log('üè¢ Empresa configurada via console:', configOnline.empresaId);
                    return true;
                } else {
                    console.log('üè¢ Empresa atual:', configOnline.empresaId || 'N√£o configurada');
                    return configOnline.empresaId;
                }
            },
            sincronizar: async () => {
                console.log('üîÑ Iniciando sincroniza√ß√£o manual via console...');
                try {
                    await sincronizarDados();
                    console.log('‚úÖ Sincroniza√ß√£o conclu√≠da via console');
                } catch (error) {
                    console.error('‚ùå Erro na sincroniza√ß√£o via console:', error);
                }
            },
            statusOnline: () => {
                const status = {
                    empresaConfigurada: !!configOnline.empresaId,
                    empresaId: configOnline.empresaId,
                    sistemaOnlineAtivo: configOnline.ativo,
                    conexaoInternet: navigator.onLine,
                    sincronizandoAgora: statusConexao.sincronizando,
                    ultimaSincronizacao: configOnline.ultimaSync,
                    ultimoErro: statusConexao.ultimoErro
                };
                console.table(status);
                return status;
            },
            resetarOnline: () => {
                configOnline.empresaId = '';
                configOnline.ativo = false;
                configOnline.ultimaSync = null;
                localStorage.removeItem('empresa_id_gg');
                localStorage.removeItem('ultima_sync_gg');
                console.log('üóëÔ∏è Configura√ß√£o online resetada via console');
                mostrarAlerta('üóëÔ∏è Configura√ß√£o online resetada via console!', 'warning');
            },
            acessos: () => Object.keys(SENHAS_ACESSO),
            avaliacoes: () => avaliacoes,
            colaboradores: () => colaboradores,
            gestores: () => gestores,
            limparTudo: () => {
                if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados! Confirma?')) {
                    localStorage.clear();
                    location.reload();
                }
            },
            stats: () => {
                console.log('üìä ESTAT√çSTICAS DO SISTEMA G&G - VERS√ÉO ONLINE');
                console.log('===============================================');
                console.log(`Total de avalia√ß√µes: ${avaliacoes.length}`);
                console.log(`Total de colaboradores: ${Object.keys(colaboradores).length}`);
                console.log(`Total de gestores: ${Object.keys(gestores).length}`);
                console.log(`Filiais ativas: ${[...new Set(avaliacoes.map(av => av.filial))].length}`);
                console.log(`Gestores √∫nicos: ${[...new Set(avaliacoes.map(av => av.nomeGestor))].length}`);
                console.log(`M√©dia geral: ${avaliacoes.length > 0 ? (avaliacoes.reduce((acc, av) => acc + parseFloat(av.pontuacao), 0) / avaliacoes.length).toFixed(2) : '0.00'}`);
                console.log(`localStorage dispon√≠vel: ${typeof(Storage) !== "undefined" ? 'SIM' : 'N√ÉO'}`);
                console.log(`Empresa configurada: ${configOnline.empresaId || 'N√ÉO'}`);
                console.log(`Sistema online ativo: ${configOnline.ativo ? 'SIM' : 'N√ÉO'}`);
                console.log(`Conex√£o: ${navigator.onLine ? 'ONLINE' : 'OFFLINE'}`);
                console.log('===============================================');
            }
        };

        // Log de inicializa√ß√£o
        console.log(`
üéØ SISTEMA G&G - VERS√ÉO COMPLETA COM SINCRONIZA√á√ÉO ONLINE
=========================================================
‚úÖ Sistema inicializado com sucesso
‚úÖ SINCRONIZA√á√ÉO ONLINE implementada
‚úÖ Dados sincronizados entre m√∫ltiplos computadores
‚úÖ Backup autom√°tico na nuvem
‚úÖ Modo offline com sincroniza√ß√£o quando conectar
‚úÖ Dados SALVOS PERMANENTEMENTE no localStorage
‚úÖ Busca autom√°tica COMPLETA implementada
‚úÖ Preenche TODOS os dados (nome, fun√ß√£o, filial, regional)
‚úÖ Feedback visual nos campos de matr√≠cula
‚úÖ EVOLU√á√ÉO SEQUENCIAL implementada
‚úÖ Mostra evolu√ß√£o entre cada avalia√ß√£o consecutiva
‚úÖ PERSIST√äNCIA TOTAL - n√£o reseta ao atualizar p√°gina
‚úÖ Dados de exemplo criados apenas na primeira vez
‚úÖ Anima√ß√µes CSS implementadas
‚úÖ Senhas personalizadas implementadas
‚úÖ Importa√ß√£o/exporta√ß√£o de dados
‚úÖ Controle de acesso por filial
‚úÖ An√°lises e relat√≥rios detalhados
‚úÖ Avalia√ß√µes carregadas: ${avaliacoes.length}
‚úÖ Colaboradores cadastrados: ${Object.keys(colaboradores).length}
‚úÖ Gestores cadastrados: ${Object.keys(gestores).length}
‚úÖ Senhas dispon√≠veis: ${Object.keys(SENHAS_ACESSO).length}
‚úÖ Empresa configurada: ${configOnline.empresaId || 'N√£o configurada'}
‚úÖ Sistema online: ${configOnline.ativo ? 'ATIVO' : 'INATIVO'}
‚úÖ Vers√£o: 2.0.0 - Sincroniza√ß√£o Online
=========================================================

üíª DESENVOLVIDO POR: Juliano Patrick
üìß CONTATO: julianocorrea@bateforte.com.br

üåê SINCRONIZA√á√ÉO ONLINE:
‚Ä¢ ‚úÖ Acesso de qualquer computador com mesmo ID de empresa
‚Ä¢ ‚úÖ Sincroniza√ß√£o autom√°tica a cada 5 minutos
‚Ä¢ ‚úÖ Backup autom√°tico na nuvem
‚Ä¢ ‚úÖ Resolu√ß√£o inteligente de conflitos
‚Ä¢ ‚úÖ Modo offline - sincroniza quando conectar
‚Ä¢ ‚úÖ Status visual de conex√£o em tempo real
‚Ä¢ ‚úÖ Log detalhado de sincroniza√ß√£o
‚Ä¢ ‚úÖ Configura√ß√£o simples via interface

üíæ PERSIST√äNCIA DE DADOS:
‚Ä¢ ‚úÖ NUNCA MAIS PERDE DADOS ao atualizar p√°gina
‚Ä¢ ‚úÖ Avalia√ß√µes salvas permanentemente
‚Ä¢ ‚úÖ Colaboradores importados mantidos
‚Ä¢ ‚úÖ Gestores importados mantidos
‚Ä¢ ‚úÖ Hist√≥rico completo preservado
‚Ä¢ ‚úÖ Configura√ß√µes mantidas
‚Ä¢ ‚úÖ Backup autom√°tico a cada opera√ß√£o

üìà EVOLU√á√ÉO SEQUENCIAL:
‚Ä¢ 1¬™ Avalia√ß√£o ‚Üí "PRIMEIRA" (üÜï)
‚Ä¢ 2¬™ Avalia√ß√£o ‚Üí Compara com a 1¬™
‚Ä¢ 3¬™ Avalia√ß√£o ‚Üí Compara com a 2¬™
‚Ä¢ 4¬™ Avalia√ß√£o ‚Üí Compara com a 3¬™
‚Ä¢ Mostra n√∫mero da avalia√ß√£o (1¬™‚Üí2¬™, 2¬™‚Üí3¬™, etc.)
‚Ä¢ Status: MELHOROU, PIOROU, EST√ÅVEL
‚Ä¢ Percentual de mudan√ßa preciso

üîç EXEMPLOS DE EVOLU√á√ÉO NOS DADOS:
‚Ä¢ Jo√£o Silva: 4 avalia√ß√µes (2.8‚Üí3.4‚Üí4.1‚Üí4.6) - Melhoria consistente
‚Ä¢ Ana Costa: 3 avalia√ß√µes (4.2‚Üí3.8‚Üí4.7) - Regress√£o e recupera√ß√£o
‚Ä¢ Carlos Mendes: 3 avalia√ß√µes (3.2‚Üí3.9‚Üí3.5) - Melhoria e recuo
‚Ä¢ Luciana Rocha: 1 avalia√ß√£o - Primeira
‚Ä¢ Eduardo Santos: 2 avalia√ß√µes (4.8‚Üí4.9) - Est√°vel/melhoria m√≠nima

üîç BUSCA AUTOM√ÅTICA COMPLETA:
‚Ä¢ Digite matr√≠cula do avaliado ‚Üí preenche nome, fun√ß√£o, filial, regional
‚Ä¢ Digite matr√≠cula do gestor ‚Üí preenche nome e fun√ß√£o
‚Ä¢ Feedback visual verde quando encontrado
‚Ä¢ Busca a partir de 3 caracteres
‚Ä¢ Limpeza autom√°tica quando n√£o encontrado

üé® RECURSOS IMPLEMENTADOS:
‚Ä¢ Transi√ß√µes suaves em todos os elementos
‚Ä¢ Hover effects nos bot√µes e cards
‚Ä¢ Anima√ß√µes de entrada escalonada
‚Ä¢ N√∫meros animados nas estat√≠sticas
‚Ä¢ Loading com spinner animado
‚Ä¢ Efeitos shimmer nos headers
‚Ä¢ Anima√ß√µes de formul√°rio
‚Ä¢ Modal com fade in/out
‚Ä¢ Progress bar animada

üîß COMANDOS DISPON√çVEIS (Console):
‚Ä¢ sistemaGG.info() - Informa√ß√µes do sistema
‚Ä¢ sistemaGG.stats() - Estat√≠sticas detalhadas
‚Ä¢ sistemaGG.backup() - Exportar backup
‚Ä¢ sistemaGG.acessos() - Listar senhas
‚Ä¢ sistemaGG.avaliacoes() - Ver todas avalia√ß√µes
‚Ä¢ sistemaGG.colaboradores() - Ver colaboradores
‚Ä¢ sistemaGG.gestores() - Ver gestores
‚Ä¢ sistemaGG.configurarEmpresa('ID') - Configurar empresa via console
‚Ä¢ sistemaGG.sincronizar() - Sincroniza√ß√£o manual
‚Ä¢ sistemaGG.statusOnline() - Status da sincroniza√ß√£o
‚Ä¢ sistemaGG.resetarOnline() - Resetar configura√ß√£o online

üéÆ ATALHOS DE TECLADO:
‚Ä¢ Ctrl+N - Nova avalia√ß√£o
‚Ä¢ Ctrl+H - Acessar hist√≥rico
‚Ä¢ Ctrl+S - Salvar avalia√ß√£o
‚Ä¢ F1 - Home
‚Ä¢ F2 - Relat√≥rios
‚Ä¢ ESC - Fechar modal

üîê SENHAS PERSONALIZADAS:
‚Ä¢ GGMASTERJP / GGMASTER - Acesso total
‚Ä¢ GG[CODIGO][NUM] - Acesso por filial
‚Ä¢ Senhas ocultas para seguran√ßa

‚ö†Ô∏è IMPORTANTE - SINCRONIZA√á√ÉO ONLINE: 
üè¢ Configure o ID da empresa nas configura√ß√µes
üåê Todos os computadores com mesmo ID compartilham dados
üîÑ Sincroniza√ß√£o autom√°tica a cada 5 minutos
üíæ Backup autom√°tico na nuvem
üì° Funciona offline, sincroniza quando conectar
=========================================================
        `);

    </script>
</body>
</html>
